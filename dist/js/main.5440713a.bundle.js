/*! build:uba by yueming@yonyou.com hash:5440713a9df58e7c5d07, chunkhash:c66f83407bad2bda2867, name:main, filebase:main.5440713a.bundle.js, query:, file:js/main.5440713a.bundle.js */
(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{183:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=y(s(18)),r=y(s(21)),n=y(s(22)),o=y(s(58)),c=y(s(95)),l=y(s(26)),i=function(){function e(e,t){for(var s=0;s<t.length;s++){var r=t[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),(0,a.default)(e,r.key,r)}}return function(t,s,a){return s&&e(t.prototype,s),a&&e(t,a),t}}(),u=(s(37),y(s(67))),f=s(35),d=y(s(0)),p=s(1),g=y(p),b=s(34),m=y(s(97)),j=y(s(96));function y(e){return e&&e.__esModule?e:{default:e}}var h={className:d.default.string,filterRefUrl:d.default.string,organrefCode:d.default.string,positonrefCode:d.default.string,roleRef:d.default.string,userRef:d.default.string,onCopyusersChange:d.default.func,onintersectionChange:d.default.func},v=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||(0,l.default)(t)).call(this));return e.changeCheck=function(){var t=e.props.onintersectionChange;e.setState({intersection:!e.state.intersection},function(){t&&t(e.state.intersection)})},e.state={copyusers:[],copyuserShowVal:[],copycheckedArray:[],intersection:!0},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=(0,n.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.default?(0,r.default)(e,t):e.__proto__=t)}(t,p.Component),i(t,[{key:"render",value:function(){var e=this,t={height:"30px",lineHeight:"30px",width:"10%",padding:"15px",display:"inline"},s={display:"inline-block",width:"36%"},a={title:g.default.createElement(f.FormattedMessage,{id:"js.b9f.src7.0001",defaultMessage:"抄送部门选择"}),backdrop:!1,hasPage:!0,multiple:!0,refType:1,isRadio:!1,className:"",emptyBtn:!0,param:{refCode:e.props.organrefCode,tenantId:"",sysId:"",transmitParam:"EXAMPLE_CONTACTS,EXAMPLE_ORGANIZATION",locale:u.default.load("u_locale")},checkedArray:e.state.copycheckedArray[0]||[],onCancel:function(e){console.log(e)},onSave:function(t,s){var a=t.map(function(e){return e.id}),r=e.state.copyuserShowVal.slice();r[0]=s;var n=e.state.copyusers.slice();n[0]=(0,c.default)(a,function(e){return{id:e,type:"DEPTS"}});var o=e.state.copycheckedArray;o[0]=t;var l=e.props.onCopyusersChange;l&&l(n),e.setState({copyusers:n,copyuserShowVal:r,copycheckedArray:o})},showVal:e.state.copyuserShowVal[0],showKey:"refname",verification:!1},r={title:g.default.createElement(f.FormattedMessage,{id:"js.b9f.src7.0002",defaultMessage:"抄送岗位选择"}),backdrop:!1,hasPage:!0,multiple:!0,refType:2,isRadio:!1,emptyBtn:!0,className:"",param:{refCode:e.props.positonrefCode,tenantId:"",sysId:"",transmitParam:"EXAMPLE_CONTACTS,EXAMPLE_ORGANIZATION",locale:u.default.load("u_locale")},checkedArray:e.state.copycheckedArray[1]||[],onCancel:function(e){console.log(e)},onSave:function(t,s){var a=t.map(function(e){return e.id}),r=e.state.copyuserShowVal.slice();r[1]=s;var n=e.state.copyusers.slice();n[1]=(0,c.default)(a,function(e){return{id:e,type:"POSTS"}});var o=e.state.copycheckedArray;o[1]=t;var l=e.props.onCopyusersChange;l&&l(n),e.setState({copyusers:n,copyuserShowVal:r,copycheckedArray:o})},showVal:e.state.copyuserShowVal[1],showKey:"refname",verification:!1},n={title:g.default.createElement(f.FormattedMessage,{id:"js.b9f.src7.0003",defaultMessage:"抄送角色选择"}),backdrop:!1,hasPage:!0,refType:2,isRadio:!1,emptyBtn:!0,className:"",param:{refCode:e.props.roleRef,tenantId:"",sysId:"",transmitParam:"EXAMPLE_CONTACTS,EXAMPLE_ORGANIZATION",locale:u.default.load("u_locale")},checkedArray:e.state.copycheckedArray[2]||[],onCancel:function(e){console.log(e)},onSave:function(t,s){var a=t.map(function(e){return e.id}),r=e.state.copyuserShowVal.slice();r[2]=s;var n=e.state.copyusers.slice();n[2]=(0,c.default)(a,function(e){return{id:e,type:"USERGROUP"}});var o=e.state.copycheckedArray;o[2]=t;var l=e.props.onCopyusersChange;l&&l(n),e.setState({copyusers:n,copyuserShowVal:r,copycheckedArray:o})},showVal:e.state.copyuserShowVal[2],showKey:"refname",verification:!1},l={title:g.default.createElement(f.FormattedMessage,{id:"js.b9f.src7.0004",defaultMessage:"抄送用户选择"}),backdrop:!1,hasPage:!0,emptyBtn:!0,refType:2,isRadio:!1,className:"",param:{refCode:e.props.refCode,tenantId:"",sysId:"",transmitParam:"EXAMPLE_CONTACTS,EXAMPLE_ORGANIZATION",locale:u.default.load("u_locale")},checkedArray:e.state.copycheckedArray[3]||[],onCancel:function(e){console.log(e)},onSave:function(t,s){var a=t.map(function(e){return e.id}),r=e.state.copyuserShowVal.slice();r[3]=s;var n=e.state.copyusers.slice();n[3]=(0,c.default)(a,function(e){return{id:e,type:"USER"}});var o=e.state.copycheckedArray;o[3]=t;var l=e.props.onCopyusersChange;l&&l(n),e.setState({copyusers:n,copyuserShowVal:r,copycheckedArray:o})},showVal:e.state.copyuserShowVal[3],showKey:"refname",verification:!1};return g.default.createElement("div",null,g.default.createElement(b.Row,null,g.default.createElement(b.Label,{style:t,className:"refLabel"},g.default.createElement(f.FormattedMessage,{id:"js.b9f.src7.0005",defaultMessage:"按部门:"})),g.default.createElement("div",{style:s},g.default.createElement(m.default,{disabled:!1,option:(0,o.default)(JSON.parse(j.default),a)})),g.default.createElement(b.Label,{style:t,className:"refLabel"},g.default.createElement(f.FormattedMessage,{id:"js.b9f.src7.0006",defaultMessage:"按岗位:"})),g.default.createElement("div",{style:s},g.default.createElement(m.default,{disabled:!1,option:(0,o.default)(JSON.parse(j.default),r)}))),g.default.createElement(b.Row,{style:{marginTop:"15px",marginBottom:"15px"}},g.default.createElement(b.Label,{style:t,className:"refLabel"},g.default.createElement(f.FormattedMessage,{id:"js.b9f.src7.0007",defaultMessage:"按角色:"})),g.default.createElement("div",{style:s},g.default.createElement(m.default,{disabled:!1,option:(0,o.default)(JSON.parse(j.default),n)})),g.default.createElement(b.Label,{style:t,className:"refLabel"},g.default.createElement(f.FormattedMessage,{id:"js.b9f.src7.0008",defaultMessage:"按用户:"})),g.default.createElement("div",{style:s},g.default.createElement(m.default,{disabled:!1,option:(0,o.default)(JSON.parse(j.default),l)}))),g.default.createElement(b.Checkbox,{style:{margin:0},checked:this.state.intersection,onChange:this.changeCheck},g.default.createElement(f.FormattedMessage,{id:"js.b9f.src7.0009",defaultMessage:"是否交集"})))}}]),t}();v.propTypes=h,v.defaultProps={className:"",filterRefUrl:"/iuap_pap_quickstart/common/filterRef",organrefCode:"newdept",positonrefCode:"newposition",roleRef:"newRoleRef",userRef:"relatedUser"},t.default=v},196:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=m(s(39)),r=m(s(18)),n=m(s(21)),o=m(s(22)),c=m(s(51)),l=m(s(26)),i=function(){function e(e,t){for(var s=0;s<t.length;s++){var a=t[s];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),(0,r.default)(e,a.key,a)}}return function(t,s,a){return s&&e(t.prototype,s),a&&e(t,a),t}}(),u=(s(37),s(35)),f=m(s(0)),d=s(1),p=m(d),g=s(34),b=s(57);function m(e){return e&&e.__esModule?e:{default:e}}var j={processDefinitionId:f.default.string,processInstanceId:f.default.string},y=function(e){function t(){var e=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var s=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||(0,l.default)(t)).call(this));return s.componentDidMount=function(e){return function(){var t=e.apply(this,arguments);return new a.default(function(e,s){return function r(n,o){try{var c=t[n](o),l=c.value}catch(e){return void s(e)}if(!c.done)return a.default.resolve(l).then(function(e){r("next",e)},function(e){r("throw",e)});e(l)}("next")})}}(c.default.mark(function t(){var a,r,n,o;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=s.props,r=a.processDefinitionId,n=a.processInstanceId,e.next=3,(0,b.sendBpmTaskAJAX)("hisTasklist",{processDefinitionId:r,processInstanceId:n});case 3:o=e.sent,s.setState({data:o.data.data});case 5:case"end":return e.stop()}},t,e)})),s.state={data:[]},s.columns=[{title:p.default.createElement(u.FormattedMessage,{id:"js.b9f.src14.0001",defaultMessage:"环节名称"}),dataIndex:"name",key:"name"},{title:p.default.createElement(u.FormattedMessage,{id:"js.b9f.src14.0002",defaultMessage:"任务类型"}),dataIndex:"description",key:"description",render:function(e,t,s){return p.default.createElement("div",null,(0,b.descriptionToText)(e))}},{title:p.default.createElement(u.FormattedMessage,{id:"js.b9f.src14.0003",defaultMessage:"审批人"}),dataIndex:"executionId",key:"executionId"},{title:p.default.createElement(u.FormattedMessage,{id:"js.b9f.src14.0004",defaultMessage:"开始时间"}),dataIndex:"startTime",key:"startTime",render:function(e,t,s){return p.default.createElement("div",null,(0,b.timestampToDate)(e))}},{title:p.default.createElement(u.FormattedMessage,{id:"js.b9f.src14.0005",defaultMessage:"结束时间"}),dataIndex:"endTime",key:"endTime",render:function(e,t,s){return null==e?p.default.createElement("div",null,"-"):p.default.createElement("div",null,(0,b.timestampToDate)(e))}},{title:p.default.createElement(u.FormattedMessage,{id:"js.b9f.src14.0006",defaultMessage:"任务状态"}),dataIndex:"e",key:"e",render:function(e,t,s){return null==t?p.default.createElement("div",null,"-"):p.default.createElement("div",null,(0,b.recordToState)(t))}},{title:p.default.createElement(u.FormattedMessage,{id:"js.b9f.src14.0007",defaultMessage:"审批意见"}),dataIndex:"deleteReason",key:"deleteReason"},{title:p.default.createElement(u.FormattedMessage,{id:"js.b9f.src14.0008",defaultMessage:"超时时间"}),dataIndex:"claimTime",key:"claimTime",render:function(e,t,s){return null==e?p.default.createElement("div",null,"-"):p.default.createElement("div",null,(0,b.timestampToDate)(e))}}],s}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=(0,o.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(n.default?(0,n.default)(e,t):e.__proto__=t)}(t,d.Component),i(t,[{key:"render",value:function(){return p.default.createElement(g.Table,{bordered:!0,emptyText:function(){return p.default.createElement("span",null,p.default.createElement(u.FormattedMessage,{id:"js.b9f.src14.0009",defaultMessage:"暂时没有流程历史数据"}))},columns:this.columns,data:this.state.data})}}]),t}();y.propTypes=j,y.defaultProps={processDefinitionId:"eiap508870:4:c3bc57e8-631a-11e8-8d04-0686c4000fcf",processInstanceId:"d5c3ab59-631a-11e8-8d04-0686c4000fcf"},t.default=y},212:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=f(s(18)),r=f(s(21)),n=f(s(22)),o=f(s(26)),c=function(){function e(e,t){for(var s=0;s<t.length;s++){var r=t[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),(0,a.default)(e,r.key,r)}}return function(t,s,a){return s&&e(t.prototype,s),a&&e(t,a),t}}(),l=s(1),i=f(l),u=f(s(0));function f(e){return e&&e.__esModule?e:{default:e}}var d={url:u.default.string,processDefinitionId:u.default.string,processInstanceId:u.default.string,width:u.default.string,height:u.default.string},p=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||(0,o.default)(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=(0,n.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.default?(0,r.default)(e,t):e.__proto__=t)}(t,l.Component),c(t,[{key:"render",value:function(){var e=this.props,t=e.processDefinitionId,s=e.processInstanceId,a=e.width,r=e.height,n=e.url;return i.default.createElement("div",null,i.default.createElement("iframe",{style:{width:a,height:r,minHeight:"400px"},src:n+"?processDefinitionId="+t+"&processInstanceId="+s,frameBorder:"0"}))}}]),t}();p.propTypes=d,p.defaultProps={url:"/eiap-plus/vendor/diagram-viewer/index.html",width:"99%",height:"400px",processDefinitionId:"eiap508870:4:c3bc57e8-631a-11e8-8d04-0686c4000fcf",processInstanceId:"d5c3ab59-631a-11e8-8d04-0686c4000fcf"},t.default=p},213:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=w(s(39)),r=w(s(18)),n=w(s(21)),o=w(s(22)),c=w(s(58)),l=w(s(51)),i=w(s(26)),u=function(){function e(e,t){for(var s=0;s<t.length;s++){var a=t[s];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),(0,r.default)(e,a.key,a)}}return function(t,s,a){return s&&e(t.prototype,s),a&&e(t,a),t}}(),f=(s(37),w(s(67))),d=s(35),p=w(s(0)),g=s(1),b=w(g),m=s(34),j=w(s(498)),y=(w(s(151)),s(57)),h=w(s(96)),v=w(s(97));function w(e){return e&&e.__esModule?e:{default:e}}function I(e){return function(){var t=e.apply(this,arguments);return new a.default(function(e,s){return function r(n,o){try{var c=t[n](o),l=c.value}catch(e){return void s(e)}if(!c.done)return a.default.resolve(l).then(function(e){r("next",e)},function(e){r("throw",e)});e(l)}("next")})}}var k={id:p.default.string,appType:p.default.string,filterRefUrl:p.default.string,refCode:p.default.string,properties:p.default.object,onBpmFlowClick:p.default.func,onStart:p.default.func,onEnd:p.default.func,onSuccess:p.default.func,onError:p.default.func,onChangestate:p.default.func},M=function(e){function t(e){var s=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||(0,i.default)(t)).call(this,e));return a.componentWillMount=function(){},a.componentDidMount=function(){"2"==a.props.appType&&a.setState({approvetype:"withdraw",comment:(0,y.approvetypeToText)("withdraw")},function(){a.props.onChangestate(a.state)})},a.handleChange=function(e){a.setState({approvetype:e,comment:(0,y.approvetypeToText)(e),userName:"",userIds:[],userId:[],checkedArray:[]},function(){a.props.onChangestate(a.state)})},a.handlerCommentChange=function(e){a.setState({comment:e.target.value},function(){a.props.onChangestate(a.state)},function(){a.props.onChangestate(a.state)})},a.activityModalClose=function(){a.setState({rejectToActivityShow:!1,rejectlist:[],selectedRow:[]},function(){a.props.onChangestate(a.state)})},a.rejectToActivityOK=I(l.default.mark(function e(){var t,r,n,o,c;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props,r=t.onStart,t.onEnd,n=t.onSuccess,o=t.onError,r&&r(),e.next=4,(0,y.sendBpmTaskAJAX)("rejectToBillMaker",{activityId:a.state.activityId,approvetype:a.state.approvetype,comment:a.state.comment,processInstanceId:a.state.processInstanceId,taskId:a.state.taskId}).catch(function(e){m.Message.create({content:""+e.toString(),color:"danger",position:"top"}),o&&o({type:2,msg:(0,d.getlocals)({id:"js.b9f.src10.0003",defaultMessage:"服务器请求错误"})})});case 4:"success"==(c=e.sent).data.flag?(n&&n(),m.Message.create({content:""+c.data.msg,color:"info",position:"top"}),a.setState({rejectToActivityShow:!1,rejectlist:[],selectedRow:[]},function(){a.props.onChangestate(a.state)})):(m.Message.create({content:""+c.data.msg,color:"danger",position:"top"}),o&&o({type:2,msg:c.data.msg}));case 6:case"end":return e.stop()}},e,s)})),a.handlerFlow=function(){var e=a.props.onBpmFlowClick;e&&e()},a.getDataSource=function(){var e=[{key:(0,d.getlocals)({id:"js.b9f.src10.0004",defaultMessage:"同意"}),value:"agree"}],t=a.props.properties,s=t.addsignAble,r=t.rejectAble,n=t.delegateAble,o=t.unagreeable,c=t.deleteable;return o||e.push({key:(0,d.getlocals)({id:"js.b9f.src10.0005",defaultMessage:"不同意"}),value:"unagree"}),r&&e.push({key:(0,d.getlocals)({id:"js.b9f.src10.0006",defaultMessage:"驳回到环节"}),value:"rejectToActivity"}),c&&e.push({key:(0,d.getlocals)({id:"js.b9f.src10.0007",defaultMessage:"驳回到制单人"}),value:"rejectToBillMaker"}),s||e.push({key:(0,d.getlocals)({id:"js.b9f.src10.0008",defaultMessage:"加签"}),value:"signAdd"}),n||e.push({key:(0,d.getlocals)({id:"js.b9f.src10.0009",defaultMessage:"改派"}),value:"delegate"}),e},a.rejectToActivity=I(l.default.mark(function e(){var t,r;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props.onError,e.next=3,(0,y.sendBpmTaskAJAX)(a.state.approvetype,a.state);case 3:"success"==(r=e.sent).data.flag&&r.data.rejectlist.length>0?a.setState({rejectlist:r.data.rejectlist,selectedRow:new Array(r.data.rejectlist.length),rejectToActivityShow:!0}):(m.Message.create({content:r.data.msg||(0,d.getlocals)({id:"js.b9f.src10.0010",defaultMessage:"当前环节没有可被驳回的环节"}),color:"warning",position:"top"}),t&&t({type:2,msg:r.data.msg||(0,d.getlocals)({id:"js.b9f.src10.0010",defaultMessage:"当前环节没有可被驳回的环节"})}));case 5:case"end":return e.stop()}},e,s)})),a.state={approvetype:"agree",comment:(0,d.getlocals)({id:"js.b9f.src10.0001",defaultMessage:"审批同意"}),processDefinitionId:e.processDefinitionId,processInstanceId:e.processInstanceId,taskId:e.id,activityId:"",activityName:"",rejectToActivityShow:!1,rejectlist:[],selectedRow:[],userIds:[],userId:[],userName:[],checkedArray:[],HuoDongID:"",HuoDongName:""},a.rejectToActivityCol=[{title:(0,d.getlocals)({id:"js.b9f.src10.0002",defaultMessage:"活动名称"}),dataIndex:"activityName",key:"activityName",textAlign:"center"}],a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=(0,o.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(n.default?(0,n.default)(e,t):e.__proto__=t)}(t,g.Component),u(t,[{key:"render",value:function(){var e=this,t=this,s={title:"delegate"===t.state.approvetype?(0,d.getlocals)({id:"js.b9f.src10.0011",defaultMessage:"改派用户选择"}):(0,d.getlocals)({id:"js.b9f.src10.0012",defaultMessage:"加签用户选择"}),backdrop:!1,hasPage:!0,refType:"delegate"===t.state.approvetype?2:5,isRadio:"delegate"===t.state.approvetype,className:"",emptyBtn:!0,param:{refCode:"delegate"===t.state.approvetype?"relatedUser":"userUnderOrgRef",tenantId:"",sysId:"",cfgParam:!0,transmitParam:"EXAMPLE_CONTACTS,EXAMPLE_ORGANIZATION",locale:f.default.load("u_locale")},textOption:{modalTitle:(0,d.getlocals)({id:"js.b9f.src10.0013",defaultMessage:"选择加签用户"}),leftTitle:(0,d.getlocals)({id:"js.b9f.src10.0014",defaultMessage:"组织结构"}),rightTitle:(0,d.getlocals)({id:"js.b9f.src10.0015",defaultMessage:"用户列表"}),leftTransferText:(0,d.getlocals)({id:"js.b9f.src10.0016",defaultMessage:"待选用户"}),rightTransferText:(0,d.getlocals)({id:"js.b9f.src10.0017",defaultMessage:"已选用户"})},checkedArray:t.state.checkedArray,onCancel:function(e){console.log(e)},onSave:function(e,s){var a=e.map(function(e){return e.id}),r=t.state.userName;r=s;var n=t.state.userIds;n=a,t.setState({userId:n[0],userIds:n,userName:r,checkedArray:e},function(){t.props.onChangestate(t.state)})},showVal:this.state.userName,showKey:"refname",verification:!1};return b.default.createElement("div",{className:"clearfix"},b.default.createElement("div",{style:{padding:"0px"}},"1"==this.props.appType&&b.default.createElement("div",null,b.default.createElement(m.Row,{style:{margin:"8px 0",padding:"0 10px"}},b.default.createElement(m.Col,{md:2,sm:2,xs:3,style:{paddingLeft:0,paddingRight:"15px"}},b.default.createElement(j.default,{style:{width:"100%"},placeholder:(0,d.getlocals)({id:"js.b9f.src10.0018",defaultMessage:"请选择"}),onChange:t.handleChange,defaultValue:"agree",data:t.getDataSource()})),b.default.createElement(m.Col,{md:3,xs:3,sm:3,style:{paddingLeft:0}},"signAdd"===this.state.approvetype&&b.default.createElement(v.default,{disabled:!1,option:(0,c.default)(JSON.parse(h.default),s)}),"delegate"===this.state.approvetype&&b.default.createElement(v.default,{disabled:!1,option:(0,c.default)(JSON.parse(h.default),s)}),"rejectToActivity"===this.state.approvetype&&b.default.createElement(m.FormControl,{readOnly:!0,placeholder:(0,d.getlocals)({id:"js.b9f.src10.0019",defaultMessage:"请选择环节"}),value:this.state.activityName,onClick:this.rejectToActivity,onChange:this.onChange})),b.default.createElement(m.Col,{md:4,mdOffset:3,xs:4,xsOffset:2,sm:4,smOffset:3,style:{textAlign:"right",paddingRight:0}},"1"==this.props.appType&&b.default.createElement(m.Button,{onClick:this.handlerFlow,colors:"primary"},(0,d.getlocals)({id:"js.b9f.src10.0020",defaultMessage:"流程图"})))),b.default.createElement(m.Row,{style:{padding:"0 10px"}},b.default.createElement(m.Col,{md:12},b.default.createElement("textarea",{style:{height:"75px",width:"100%",outline:"none",resize:"none",border:"1px solid #cecece",padding:"10px",marginBottom:"20px",borderRadius:"4px"},placeholder:(0,d.getlocals)({id:"js.b9f.src10.0021",defaultMessage:"请输入处理意见"}),value:this.state.comment,onChange:this.handlerCommentChange})))),"2"==this.props.appType&&b.default.createElement("div",null,b.default.createElement(m.Row,{style:{height:"46px",lineHeight:"46px",padding:"0 10px"}},b.default.createElement(m.Col,{md:8},b.default.createElement(m.Radio.RadioGroup,{name:"approvetype",selectedValue:this.state.approvetype,onChange:this.handleChange},b.default.createElement(m.Radio,{value:"withdraw"},(0,d.getlocals)({id:"js.b9f.src10.0022",defaultMessage:"弃审"})))),b.default.createElement(m.Col,{md:4,style:{textAlign:"right"}},"2"==this.props.appType&&b.default.createElement(m.Button,{onClick:this.handlerFlow,colors:"primary"},(0,d.getlocals)({id:"js.b9f.src10.0020",defaultMessage:"流程图"})))),b.default.createElement(m.Row,{style:{padding:"0 10px"}},b.default.createElement(m.Col,{md:12},b.default.createElement("textarea",{style:{height:"75px",width:"100%",outline:"none",resize:"none",border:"1px solid #cecece",padding:"10px",marginBottom:"20px",borderRadius:"4px"},placeholder:(0,d.getlocals)({id:"js.b9f.src10.0023",defaultMessage:"请输入弃审意见"}),value:this.state.comment,onChange:this.handlerCommentChange}))))),b.default.createElement(m.Modal,{show:this.state.rejectToActivityShow,backdrop:!1,onHide:this.activityModalClose},b.default.createElement(m.Modal.Header,{closeButton:!0},b.default.createElement(m.Modal.Title,null,(0,d.getlocals)({id:"js.b9f.src10.0024",defaultMessage:"活动列表"}))),b.default.createElement(m.Modal.Body,null,b.default.createElement(m.Table,{rowKey:function(e){return e.activityId},emptyText:function(){return b.default.createElement("div",null,(0,d.getlocals)({id:"js.b9f.src10.0025",defaultMessage:"暂无数据"}))},rowClassName:function(t,s,a){return e.state.selectedRow[s]?"selected":""},onRowClick:function(t,s,a){var r=new Array(e.state.rejectlist.length);r[s]=!0,e.setState({activityId:t.activityId,activityName:t.activityName,selectedRow:r},function(){e.props.onChangestate(e.state)})},columns:this.rejectToActivityCol,data:this.state.rejectlist})),b.default.createElement(m.Modal.Footer,null,b.default.createElement(m.Button,{colors:"primary",style:{marginRight:"10px"},onClick:this.activityModalClose},(0,d.getlocals)({id:"js.b9f.src10.0026",defaultMessage:"确定"})),b.default.createElement(m.Button,{onClick:this.activityModalClose},(0,d.getlocals)({id:"js.b9f.src10.0027",defaultMessage:"关闭"})))))}}]),t}();M.propTypes=k,M.defaultProps={appType:"1",refCode:"relatedUser",filterRefUrl:"/iuap_pap_quickstart/common/filterRef",properties:{addSignAble:!0,iscopytouser:!0,rejectAble:!0,delegateAble:!0,unagreeable:!0,assignAble:!0,deleteable:!0}},t.default=M},35:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FormattedMessage=t.getlocals=void 0;var a=g(s(18)),r=g(s(21)),n=g(s(22)),o=g(s(26)),c=function(){function e(e,t){for(var s=0;s<t.length;s++){var r=t[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),(0,a.default)(e,r.key,r)}}return function(t,s,a){return s&&e(t.prototype,s),a&&e(t,a),t}}(),l=s(1),i=g(l),u=(g(s(470)),g(s(471)),g(s(67))),f=g(s(474)),d=g(s(475)),p=g(s(476));function g(e){return e&&e.__esModule?e:{default:e}}var b=u.default.load("u_locale");function m(e){switch(e){case"en_US":return d.default;case"zh_CN":return f.default;case"zh_TW":return p.default;default:return f.default}}t.getlocals=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=m(b);return t[e.id]?t[e.id]:e.defaultMessage||""},t.FormattedMessage=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||(0,o.default)(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=(0,n.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.default?(0,r.default)(e,t):e.__proto__=t)}(t,l.Component),c(t,[{key:"render",value:function(){var e=this.props,t=e.id,s=e.defaultMessage;return i.default.createElement("span",null,m(b)[t]||s)}}]),t}()},409:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=j(s(58)),r=j(s(18)),n=j(s(21)),o=j(s(22)),c=j(s(26)),l=a.default||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},i=function(){function e(e,t){for(var s=0;s<t.length;s++){var a=t[s];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),(0,r.default)(e,a.key,a)}}return function(t,s,a){return s&&e(t.prototype,s),a&&e(t,a),t}}(),u=(s(37),s(35)),f=s(1),d=j(f),p=j(s(0)),g=s(34),b=j(s(8)),m=j(s(183));function j(e){return e&&e.__esModule?e:{default:e}}var y={panelOpen:p.default.bool,reset:p.default.func,title:p.default.string,filterRefUrl:p.default.string,organrefCode:p.default.string,positonrefCode:p.default.string,refCode:p.default.string,onCopyusersChange:p.default.func,onintersectionChange:p.default.func},h=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||(0,c.default)(t)).call(this));return e.open=function(){e.setState({panelOpen:!e.state.panelOpen})},e.changeCheck=function(){e.setState({intersection:!e.state.intersection})},e.state={panelOpen:!0,copyusers:[],copyuserShowVal:[],intersection:!0},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=(0,o.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(n.default?(0,n.default)(e,t):e.__proto__=t)}(t,f.Component),i(t,[{key:"render",value:function(){var e=this;return d.default.createElement(g.Panel,{className:"copy-panel",style:{borderRadius:"0!important",border:"none!important",borderBottom:"1px solid transparent!important"},header:d.default.createElement("div",{className:"clearfix",onClick:e.open},d.default.createElement("span",{className:"copy-panel-title",style:{float:"left",color:"#434A54",fontSize:"14px"}},e.props.title),d.default.createElement("span",{className:"copy-panel-icon",style:{float:"right",color:"#1E7BE2",fontSize:"14px"}},e.state.panelOpen?d.default.createElement(u.FormattedMessage,{id:"js.b9f.src.0001",defaultMessage:"展开"}):d.default.createElement(u.FormattedMessage,{id:"js.b9f.src.0002",defaultMessage:"收起"}),d.default.createElement("i",{className:(0,b.default)({uf:!0,"uf-arrow-down":!e.state.panelOpen,"uf-arrow-right":e.state.panelOpen})}))),collapsible:!0,expanded:this.state.searchOpen},d.default.createElement("div",{className:"clearfix"},d.default.createElement(m.default,l({onCopyusersChange:this.props.onCopyusersChange},this.props,{onintersectionChange:this.props.onintersectionChange}))))}}]),t}();h.propTypes=y,h.defaultProps={panelOpen:!1,selectResult:function(){},reset:function(){},title:"抄送(选填)",filterRefUrl:"/iuap_pap_quickstart/common/filterRef",refCode:"relatedUser",organrefCode:"newdept",positonrefCode:"newposition",roleRef:"newrole",userRef:"relatedUser"},t.default=h},411:function(e,t){},415:function(e,t,s){"use strict";var a=o(s(1)),r=o(s(3)),n=o(s(420));function o(e){return e&&e.__esModule?e:{default:e}}r.default.render(a.default.createElement(n.default,null),document.querySelector("#app"))},420:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=p(s(18)),r=p(s(21)),n=p(s(22)),o=p(s(26)),c=function(){function e(e,t){for(var s=0;s<t.length;s++){var r=t[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),(0,a.default)(e,r.key,r)}}return function(t,s,a){return s&&e(t.prototype,s),a&&e(t,a),t}}(),l=s(37),i=s(1),u=p(i),f=s(34),d=s(451);function p(e){return e&&e.__esModule?e:{default:e}}s(966);var g=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||(0,o.default)(t)).call(this));return e.state={},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=(0,n.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.default?(0,r.default)(e,t):e.__proto__=t)}(t,i.Component),c(t,[{key:"render",value:function(){return u.default.createElement("div",null,u.default.createElement(d.BpmTaskApprovalWrap,{onSuccess:function(){return console.log("success")},onError:function(e){return console.log(e)},appType:"1",id:"692ab251139c41699cdb85651bed5c91"}),u.default.createElement(d.BpmLinkAssign,null),u.default.createElement(d.BpmFlowChart,{processDefinitionId:"eiap350694:3:e2e70948-9559-11e8-b376-02420cbf1b08",processInstanceId:"1352ad87-955e-11e8-b376-02420cbf1b08"}),u.default.createElement(d.BpmTable,{processDefinitionId:"eiap350694:3:e2e70948-9559-11e8-b376-02420cbf1b08",processInstanceId:"1352ad87-955e-11e8-b376-02420cbf1b08"}),u.default.createElement(d.BpmTestCheckTable,null),u.default.createElement(d.BpmButtonSubmit,{funccode:"ygdemo_yw_info",nodekey:"003",size:"lg",isOne:!1,url:"/ygdemo_yw_info/submit",urlAssignSubmit:"/ygdemo_yw_info/assignSubmit",checkedArray:[{id:"ea69b9bf-d8b5-47a7-a1fd-1114f36a9321",code:"180719001",name:u.default.createElement(l.FormattedMessage,{id:"js.b9f.src4.0001",defaultMessage:"岳明-01"}),ly_code:"1",ly_sm:"岳明-01\0",zr_dw:"97da3229-3308-4492-a457-cb4d4e6264a4",zr_dw_name:u.default.createElement(l.FormattedMessage,{id:"js.b9f.src4.0003",defaultMessage:"用友股份"}),zrr:null,xb_dw:null,xb_dw_name:null,xbr:null,begin_date:null,end_date:null,zy_cd:2,qt_ld:null,zbr:null,zbr_name:null,dbr:null,jfyq:null,db_info:null,jd_bl:null,rwpf:null,kpi_flag:0,kpi_level:1,state:0,create_name:null,create_name_name:null,create_time:null,update_name:null,update_name_name:null,update_time:null,unitid:null,unitid_name:null,id_ygdemo_yw_sub:null,metaDefinedName:"ygdemo_yw_info",namespace:"iuap_qy",status:0,changedPropertyNames:null,tenant_id:"tenant",dr:0,ts:1531970736e3},{id:"ea69b9bf-d8sssa7-a1fd-1114f36a9321",code:"180719001",name:u.default.createElement(l.FormattedMessage,{id:"js.b9f.src4.0001",defaultMessage:"岳明-01"}),ly_code:"1",ly_sm:"岳明-01\0",zr_dw:"97da3229-3308-4492-a457-cb4d4e6264a4",zr_dw_name:u.default.createElement(l.FormattedMessage,{id:"js.b9f.src4.0003",defaultMessage:"用友股份"}),zrr:null,xb_dw:null,xb_dw_name:null,xbr:null,begin_date:null,end_date:null,zy_cd:2,qt_ld:null,zbr:null,zbr_name:null,dbr:null,jfyq:null,db_info:null,jd_bl:null,rwpf:null,kpi_flag:0,kpi_level:1,state:0,create_name:null,create_name_name:null,create_time:null,update_name:null,update_name_name:null,update_time:null,unitid:null,unitid_name:null,id_ygdemo_yw_sub:null,metaDefinedName:"ygdemo_yw_info",namespace:"iuap_qy",status:0,changedPropertyNames:null,tenant_id:"tenant",dr:0,ts:1531970736e3}],onSuccess:function(){return console.log("success")},onError:function(e){return console.log(e)}},u.default.createElement(f.Button,{size:"sm",shape:"border",className:"admin"},u.default.createElement("i",{className:"uf uf-arrow-c-o-up"}),"提交")),u.default.createElement(d.BpmButtonRecall,{url:"/iuap_pap_quickstart/example_workorder/recall",onSuccess:function(){return console.log("success")},onError:function(e){return console.log(e)},checkedArray:[{id:"ccb34c6d3fc349789be73678d7cc8fac",createTime:"2018-07-04 12:36:26 088",createUser:"U001",lastModified:"2018-07-04 12:36:26 088",lastModifyUser:"U001",ts:"2018-07-04 12:36:26 088",dr:0,bpmState:1,taskKey:null,taskId:null,processInstanceId:null,processDefineCode:null,comment:null,orderCode:"201807042036265",orderName:null,supplier:null,supplierName:"11",type:"0",purchasing:"22",purchasingGroup:"22",voucherDate:15306336e5,approvalState:null,confirmState:null,closeState:null,type_name:u.default.createElement(l.FormattedMessage,{id:"js.b9f.src4.0004",defaultMessage:"投诉工单"}),approvalState_name:null,confirmState_name:null,closeState_name:null,remark:null,bpmBillCode:null}]},u.default.createElement(f.Button,{size:"sm",shape:"border",className:"admin"},u.default.createElement("i",{className:"uf uf-arrow-c-o-down"}),"收回")))}}]),t}();t.default=g},440:function(e,t){},446:function(e,t){},451:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BpmTaskCopyPanel=t.BpmCopyContent=t.BpmLinkAssign=t.BpmButtonRecall=t.BpmButtonSubmit=t.BpmTaskApprovalWrap=t.BpmWrap=t.BpmTestCheckTable=t.BpmTaskApproval=t.BpmFlowChart=t.BpmTable=void 0;var a=g(s(196)),r=g(s(212)),n=g(s(213)),o=g(s(960)),c=g(s(961)),l=g(s(962)),i=g(s(963)),u=g(s(964)),f=g(s(965)),d=g(s(183)),p=g(s(409));function g(e){return e&&e.__esModule?e:{default:e}}t.BpmTable=a.default,t.BpmFlowChart=r.default,t.BpmTaskApproval=n.default,t.BpmTestCheckTable=o.default,t.BpmWrap=c.default,t.BpmTaskApprovalWrap=l.default,t.BpmButtonSubmit=i.default,t.BpmButtonRecall=u.default,t.BpmLinkAssign=f.default,t.BpmCopyContent=d.default,t.BpmTaskCopyPanel=p.default},474:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={"ht.b9f.src.0001":"本地示例演示","js.b9f.src.0001":"展开","js.b9f.src.0002":"收起","js.b9f.src.0003":"抄送(选填)","js.b9f.src2.0001":"用户名称","js.b9f.src2.0002":"选择品类","js.b9f.src2.0003":"品类结构","js.b9f.src2.0004":"品类列表","js.b9f.src2.0005":"待选品类","js.b9f.src2.0006":"已选品类","js.b9f.src2.0007":"流水号","js.b9f.src2.0008":"品类编码","js.b9f.src2.0009":"品类描述","js.b9f.src3.0001":"日","js.b9f.src3.0002":"一","js.b9f.src3.0003":"二","js.b9f.src3.0004":"三","js.b9f.src3.0005":"四","js.b9f.src3.0006":"五","js.b9f.src3.0007":"六","js.b9f.src3.0008":"提交","js.b9f.src3.0009":"审批","js.b9f.src3.0010":"不同意","js.b9f.src3.0011":"驳回","js.b9f.src3.0012":"加签","js.b9f.src3.0013":"加签中","js.b9f.src3.0014":"改派","js.b9f.src3.0015":"终止","js.b9f.src3.0016":"删除","js.b9f.src3.0017":"已完成","js.b9f.src3.0018":"有开始时间 有结束时间为已完成","js.b9f.src3.0019":"已逾期","js.b9f.src3.0020":"当前时间大于超时时间","js.b9f.src3.0021":"审批中","js.b9f.src3.0022":"其他情况为审批中","js.b9f.src3.0023":"审批同意","js.b9f.src3.0024":"审批不同意","js.b9f.src3.0025":"驳回到环节","js.b9f.src3.0026":"驳回到制单人","js.b9f.src3.0027":"弃审","js.b9f.src4.0001":"岳明-01","js.b9f.src4.0002":"岳明-01\\\\u0000","js.b9f.src4.0003":"用友股份","js.b9f.src4.0004":"投诉工单","js.b9f.src5.0001":"审批同意","js.b9f.src5.0002":"审批内容","js.b9f.src5.0003":"服务器请求出错","js.b9f.src5.0004":"流程启动失败","js.b9f.src5.0005":"审批意见不能为空","js.b9f.src5.0006":"指派用户选择","js.b9f.src5.0007":"选择指派用户","js.b9f.src5.0008":"组织结构","js.b9f.src5.0009":"用户列表","js.b9f.src5.0010":"待选用户","js.b9f.src5.0011":"已选用户","js.b9f.src5.0012":"content: `驳回环节不可为空`, color: 'warning', position: 'top'","js.b9f.src5.0013":"驳回环节不可为空","js.b9f.src5.0014":"服务器请求错误","js.b9f.src5.0015":"content: `加签用户不可为空`, color: 'warning', position: 'top'","js.b9f.src5.0016":"加签用户不可为空","js.b9f.src5.0017":"content: `改派用户不可为空`, color: 'warning', position: 'top'","js.b9f.src5.0018":"改派用户不可为空","js.b9f.src5.0019":"名称","js.b9f.src5.0020":"指派","js.b9f.src5.0021":"抄送(选填)","js.b9f.src5.0022":"提交","js.b9f.src5.0023":"流程图","js.b9f.src5.0024":"环节指派","js.b9f.src5.0025":"关闭","js.b9f.src5.0026":"确定","js.b9f.src6.0001":"请选择单条数据提交","js.b9f.src6.0002":"不能提交此单据，重复提交","js.b9f.src6.0003":"当前单据没有绑定流程","js.b9f.src6.0004":"流程启动失败","js.b9f.src6.0005":"请选择提交的单据","js.b9f.src6.0006":"后台服务请求发生错误","js.b9f.src6.0007":"名称","js.b9f.src6.0008":"指派","js.b9f.src6.0009":"选择指派用户","js.b9f.src6.0010":"组织结构","js.b9f.src6.0011":"用户列表","js.b9f.src6.0012":"待选用户","js.b9f.src6.0013":"已选用户","js.b9f.src6.0014":"环节指派","js.b9f.src6.0015":"抄送","js.b9f.src6.0016":"抄送","js.b9f.src6.0017":"关闭","js.b9f.src6.0018":"确定","js.b9f.src7.0001":"抄送部门选择","js.b9f.src7.0002":"抄送岗位选择","js.b9f.src7.0003":"抄送角色选择","js.b9f.src7.0004":"抄送用户选择","js.b9f.src7.0005":"按部门:","js.b9f.src7.0006":"按岗位:","js.b9f.src7.0007":"按角色:","js.b9f.src7.0008":"按用户:","js.b9f.src7.0009":"是否交集","js.b9f.src8.0001":"请选择单条数据提交","js.b9f.src8.0002":"不能提交此单据，重复提交","js.b9f.src8.0003":"流程启动失败","js.b9f.src8.0004":"请选择提交的单据","js.b9f.src8.0005":"后台服务请求发生错误","js.b9f.src8.0006":"名称","js.b9f.src8.0007":"指派","js.b9f.src8.0008":"用户选择","js.b9f.src8.0009":"暂无环节","js.b9f.src10.0001":"审批同意","js.b9f.src10.0002":"活动名称","js.b9f.src10.0003":"服务器请求错误","js.b9f.src10.0004":"同意","js.b9f.src10.0005":"不同意","js.b9f.src10.0006":"驳回到环节","js.b9f.src10.0007":"驳回到制单人","js.b9f.src10.0008":"加签","js.b9f.src10.0009":"改派","js.b9f.src10.0010":"当前环节没有可被驳回的环节","js.b9f.src10.0011":"改派用户选择","js.b9f.src10.0012":"加签用户选择","js.b9f.src10.0013":"选择加签用户","js.b9f.src10.0014":"组织结构","js.b9f.src10.0015":"用户列表","js.b9f.src10.0016":"待选用户","js.b9f.src10.0017":"已选用户","js.b9f.src10.0018":"请选择","js.b9f.src10.0019":"请选择环节","js.b9f.src10.0020":"流程图","js.b9f.src10.0021":"请输入处理意见","js.b9f.src10.0022":"弃审","js.b9f.src10.0023":"请输入弃审意见","js.b9f.src10.0024":"活动列表","js.b9f.src10.0025":"暂无数据","js.b9f.src10.0026":"确定","js.b9f.src10.0027":"关闭","js.b9f.src11.0001":"暂时没有数据","js.b9f.src11.0002":"任务中心打开审批","js.b9f.src13.0001":"请选择单条数据收回","js.b9f.src13.0002":"流程没有启动无法撤回","js.b9f.src13.0003":"请选择单据才能撤回","js.b9f.src14.0001":"环节名称","js.b9f.src14.0002":"任务类型","js.b9f.src14.0003":"审批人","js.b9f.src14.0004":"开始时间","js.b9f.src14.0005":"结束时间","js.b9f.src14.0006":"任务状态","js.b9f.src14.0007":"审批意见","js.b9f.src14.0008":"超时时间","js.b9f.src14.0009":"暂时没有流程历史数据","js.b9f.src14.0010":"取消"}},475:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={"ht.b9f.src.0001":"本地示例演示","js.b9f.src.0001":"Expand","js.b9f.src.0002":"Hide","js.b9f.src.0003":"Copy(optional)","js.b9f.src2.0001":"User Name","js.b9f.src2.0002":"Select Category","js.b9f.src2.0003":"Category Structure","js.b9f.src2.0004":"Category List","js.b9f.src2.0005":"Available Category","js.b9f.src2.0006":"Selected Category","js.b9f.src2.0007":"SN","js.b9f.src2.0008":"Category Code","js.b9f.src2.0009":"Category Desc.","js.b9f.src3.0001":"日","js.b9f.src3.0002":"一","js.b9f.src3.0003":"二","js.b9f.src3.0004":"三","js.b9f.src3.0005":"四","js.b9f.src3.0006":"五","js.b9f.src3.0007":"六","js.b9f.src3.0008":"Submit","js.b9f.src3.0009":"Approval","js.b9f.src3.0010":"Disagree","js.b9f.src3.0011":"Reject","js.b9f.src3.0012":"Add Approver","js.b9f.src3.0013":"Adding Approver","js.b9f.src3.0014":"Reassign","js.b9f.src3.0015":"Terminate","js.b9f.src3.0016":"Delete","js.b9f.src3.0017":"Completed","js.b9f.src3.0018":"有开始时间 有结束时间为已完成","js.b9f.src3.0019":"Overdue","js.b9f.src3.0020":"当前时间大于超时时间","js.b9f.src3.0021":"Pending Approval","js.b9f.src3.0022":"其他情况为审批中","js.b9f.src3.0023":"Approval agreement","js.b9f.src3.0024":"Approval disagrees","js.b9f.src3.0025":"Reject to Phase","js.b9f.src3.0026":"Reject to Creator","js.b9f.src3.0027":"Revoke Approval","js.b9f.src4.0001":"岳明-01","js.b9f.src4.0002":"岳明-01\\\\u0000","js.b9f.src4.0003":"用友股份","js.b9f.src4.0004":"投诉工单","js.b9f.src5.0001":"Approval agreement","js.b9f.src5.0002":"Contents of examination and approval","js.b9f.src5.0003":"Server request error","js.b9f.src5.0004":"Process Startup Failure","js.b9f.src5.0005":"Examination and approval opinions should not be empty","js.b9f.src5.0006":"Assign User Selection","js.b9f.src5.0007":"Select Assignment Users","js.b9f.src5.0008":"Org Structure","js.b9f.src5.0009":"User List","js.b9f.src5.0010":"User to be selected","js.b9f.src5.0011":"Selected users","js.b9f.src5.0012":"content: `驳回环节不可为空`, color: 'warning', position: 'top'","js.b9f.src5.0013":"The rejection link should not be empty","js.b9f.src5.0014":"Server request error","js.b9f.src5.0015":"content: `加签用户不可为空`, color: 'warning', position: 'top'","js.b9f.src5.0016":"Signed users cannot be empty","js.b9f.src5.0017":"content: `改派用户不可为空`, color: 'warning', position: 'top'","js.b9f.src5.0018":"Reassignment users cannot be empty","js.b9f.src5.0019":"Name","js.b9f.src5.0020":"Assign","js.b9f.src5.0021":"Copy(optional)","js.b9f.src5.0022":"Submit","js.b9f.src5.0023":"Flow Chart","js.b9f.src5.0024":"Link assignment","js.b9f.src5.0025":"Close","js.b9f.src5.0026":"OK","js.b9f.src6.0001":"Please select a single data submission","js.b9f.src6.0002":"Failure to submit this document, duplicate submission","js.b9f.src6.0003":"Current documents have no binding process","js.b9f.src6.0004":"Process Startup Failure","js.b9f.src6.0005":"Please select the documents submitted.","js.b9f.src6.0006":"Service request error","js.b9f.src6.0007":"Name","js.b9f.src6.0008":"Assign","js.b9f.src6.0009":"Select Assignment Users","js.b9f.src6.0010":"Org Structure","js.b9f.src6.0011":"User List","js.b9f.src6.0012":"User to be selected","js.b9f.src6.0013":"Selected users","js.b9f.src6.0014":"Link assignment","js.b9f.src6.0015":"CC","js.b9f.src6.0016":"CC","js.b9f.src6.0017":"Close","js.b9f.src6.0018":"OK","js.b9f.src7.0001":"抄送部门选择","js.b9f.src7.0002":"抄送岗位选择","js.b9f.src7.0003":"抄送角色选择","js.b9f.src7.0004":"抄送用户选择","js.b9f.src7.0005":"按部门:","js.b9f.src7.0006":"按岗位:","js.b9f.src7.0007":"按角色:","js.b9f.src7.0008":"按用户:","js.b9f.src7.0009":"是否交集","js.b9f.src8.0001":"Please select a single data submission","js.b9f.src8.0002":"Failure to submit this document, duplicate submission","js.b9f.src8.0003":"Process Startup Failure","js.b9f.src8.0004":"Please select the documents submitted.","js.b9f.src8.0005":"Background service request error","js.b9f.src8.0006":"Name","js.b9f.src8.0007":"Assign","js.b9f.src8.0008":"User choice","js.b9f.src8.0009":"No links","js.b9f.src10.0001":"Approval agreement","js.b9f.src10.0002":"Activity Name","js.b9f.src10.0003":"Server request error","js.b9f.src10.0004":"Agree","js.b9f.src10.0005":"Disagree","js.b9f.src10.0006":"Reject to Phase","js.b9f.src10.0007":"Reject to Creator","js.b9f.src10.0008":"Add Approver","js.b9f.src10.0009":"Reassign","js.b9f.src10.0010":"There are no links that can be rejected at present.","js.b9f.src10.0011":"Reassign User Selection","js.b9f.src10.0012":"Additional user selection","js.b9f.src10.0013":"Select additional subscribers","js.b9f.src10.0014":"Org Structure","js.b9f.src10.0015":"User List","js.b9f.src10.0016":"User to be selected","js.b9f.src10.0017":"Selected users","js.b9f.src10.0018":"Please select","js.b9f.src10.0019":"Please select the link","js.b9f.src10.0020":"Flow Chart","js.b9f.src10.0021":"Please enter your comments.","js.b9f.src10.0022":"Revoke Approval","js.b9f.src10.0023":"Please enter a waiver opinion","js.b9f.src10.0024":"Activity List","js.b9f.src10.0025":"No data","js.b9f.src10.0026":"OK","js.b9f.src10.0027":"Close","js.b9f.src11.0001":"No data","js.b9f.src11.0002":"任务中心打开审批","js.b9f.src13.0001":"Please select a single data recovery","js.b9f.src13.0002":"The process cannot be undone without starting","js.b9f.src13.0003":"Please select the documents to withdraw.","js.b9f.src14.0001":"Link name","js.b9f.src14.0002":"Task Type","js.b9f.src14.0003":"Approved By","js.b9f.src14.0004":"Start Time","js.b9f.src14.0005":"End Time","js.b9f.src14.0006":"Task status","js.b9f.src14.0007":"Approval Comments","js.b9f.src14.0008":"Timeout","js.b9f.src14.0009":"No process history data","js.b9f.src14.0010":"Cancel"}},476:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={"ht.b9f.src.0001":"本地示例演示","js.b9f.src.0001":"展開","js.b9f.src.0002":"收起","js.b9f.src.0003":"抄送(選填)","js.b9f.src2.0001":"用戶名稱","js.b9f.src2.0002":"選擇品類","js.b9f.src2.0003":"品類結構","js.b9f.src2.0004":"品類列表","js.b9f.src2.0005":"待選品類","js.b9f.src2.0006":"已選品類","js.b9f.src2.0007":"流水號","js.b9f.src2.0008":"品類編碼","js.b9f.src2.0009":"品類描述","js.b9f.src3.0001":"日","js.b9f.src3.0002":"一","js.b9f.src3.0003":"二","js.b9f.src3.0004":"三","js.b9f.src3.0005":"四","js.b9f.src3.0006":"五","js.b9f.src3.0007":"六","js.b9f.src3.0008":"提交","js.b9f.src3.0009":"審批","js.b9f.src3.0010":"不同意","js.b9f.src3.0011":"駁回","js.b9f.src3.0012":"加簽","js.b9f.src3.0013":"加簽中","js.b9f.src3.0014":"改派","js.b9f.src3.0015":"終止","js.b9f.src3.0016":"刪除","js.b9f.src3.0017":"已完成","js.b9f.src3.0018":"有開始時間 有結束時間為已完成","js.b9f.src3.0019":"已逾期","js.b9f.src3.0020":"當前時間大於超時時間","js.b9f.src3.0021":"審批中","js.b9f.src3.0022":"其他情況為審批中","js.b9f.src3.0023":"審批同意","js.b9f.src3.0024":"審批不同意","js.b9f.src3.0025":"駁回到環節","js.b9f.src3.0026":"駁回到制單人","js.b9f.src3.0027":"棄審","js.b9f.src4.0001":"嶽明-01","js.b9f.src4.0002":"嶽明-01\\\\u0000","js.b9f.src4.0003":"用友股份","js.b9f.src4.0004":"投訴工單","js.b9f.src5.0001":"審批同意","js.b9f.src5.0002":"審批內容","js.b9f.src5.0003":"伺服器請求出錯","js.b9f.src5.0004":"流程啟動失敗","js.b9f.src5.0005":"審批意見不能為空","js.b9f.src5.0006":"指派用戶選擇","js.b9f.src5.0007":"選擇指派用戶","js.b9f.src5.0008":"組織結構","js.b9f.src5.0009":"用戶列表","js.b9f.src5.0010":"待選用戶","js.b9f.src5.0011":"已選用戶","js.b9f.src5.0012":"content: `駁迴環節不可為空`, color: 'warning', position: 'top'","js.b9f.src5.0013":"駁迴環節不可為空","js.b9f.src5.0014":"伺服器請求錯誤","js.b9f.src5.0015":"content: `加簽用戶不可為空`, color: 'warning', position: 'top'","js.b9f.src5.0016":"加簽用戶不可為空","js.b9f.src5.0017":"content: `改派用戶不可為空`, color: 'warning', position: 'top'","js.b9f.src5.0018":"改派用戶不可為空","js.b9f.src5.0019":"名稱","js.b9f.src5.0020":"指派","js.b9f.src5.0021":"抄送(選填)","js.b9f.src5.0022":"提交","js.b9f.src5.0023":"流程圖","js.b9f.src5.0024":"環節指派","js.b9f.src5.0025":"關閉","js.b9f.src5.0026":"確定","js.b9f.src6.0001":"請選擇單條數據提交","js.b9f.src6.0002":"不能提交此單據，重復提交","js.b9f.src6.0003":"當前單據沒有綁定流程","js.b9f.src6.0004":"流程啟動失敗","js.b9f.src6.0005":"請選擇提交的單據","js.b9f.src6.0006":"後台服務請求發生錯誤","js.b9f.src6.0007":"名稱","js.b9f.src6.0008":"指派","js.b9f.src6.0009":"選擇指派用戶","js.b9f.src6.0010":"組織結構","js.b9f.src6.0011":"用戶列表","js.b9f.src6.0012":"待選用戶","js.b9f.src6.0013":"已選用戶","js.b9f.src6.0014":"環節指派","js.b9f.src6.0015":"抄送","js.b9f.src6.0016":"抄送","js.b9f.src6.0017":"關閉","js.b9f.src6.0018":"確定","js.b9f.src7.0001":"抄送部門選擇","js.b9f.src7.0002":"抄送崗位選擇","js.b9f.src7.0003":"抄送角色選擇","js.b9f.src7.0004":"抄送用戶選擇","js.b9f.src7.0005":"按部門:","js.b9f.src7.0006":"按崗位:","js.b9f.src7.0007":"按角色:","js.b9f.src7.0008":"按用戶:","js.b9f.src7.0009":"是否交集","js.b9f.src8.0001":"請選擇單條數據提交","js.b9f.src8.0002":"不能提交此單據，重復提交","js.b9f.src8.0003":"流程啟動失敗","js.b9f.src8.0004":"請選擇提交的單據","js.b9f.src8.0005":"後台服務請求發生錯誤","js.b9f.src8.0006":"名稱","js.b9f.src8.0007":"指派","js.b9f.src8.0008":"用戶選擇","js.b9f.src8.0009":"暫無環節","js.b9f.src10.0001":"審批同意","js.b9f.src10.0002":"活動名稱","js.b9f.src10.0003":"伺服器請求錯誤","js.b9f.src10.0004":"同意","js.b9f.src10.0005":"不同意","js.b9f.src10.0006":"駁回到環節","js.b9f.src10.0007":"駁回到制單人","js.b9f.src10.0008":"加簽","js.b9f.src10.0009":"改派","js.b9f.src10.0010":"當前環節沒有可被駁回的環節","js.b9f.src10.0011":"改派用戶選擇","js.b9f.src10.0012":"加簽用戶選擇","js.b9f.src10.0013":"選擇加簽用戶","js.b9f.src10.0014":"組織結構","js.b9f.src10.0015":"用戶列表","js.b9f.src10.0016":"待選用戶","js.b9f.src10.0017":"已選用戶","js.b9f.src10.0018":"請選擇","js.b9f.src10.0019":"請選擇環節","js.b9f.src10.0020":"流程圖","js.b9f.src10.0021":"請輸入處理意見","js.b9f.src10.0022":"棄審","js.b9f.src10.0023":"請輸入棄審意見","js.b9f.src10.0024":"活動列表","js.b9f.src10.0025":"暫無數據","js.b9f.src10.0026":"確定","js.b9f.src10.0027":"關閉","js.b9f.src11.0001":"暫時沒有數據","js.b9f.src11.0002":"任務中心打開審批","js.b9f.src13.0001":"請選擇單條數據收回","js.b9f.src13.0002":"流程沒有啟動無法撤回","js.b9f.src13.0003":"請選擇單據才能撤回","js.b9f.src14.0001":"環節名稱","js.b9f.src14.0002":"任務類型","js.b9f.src14.0003":"審批人","js.b9f.src14.0004":"開始時間","js.b9f.src14.0005":"結束時間","js.b9f.src14.0006":"任務狀態","js.b9f.src14.0007":"審批意見","js.b9f.src14.0008":"超時時間","js.b9f.src14.0009":"暫時沒有流程曆史數據","js.b9f.src14.0010":"取消"}},57:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.reconvert=t.approvetypeToText=t.onRecall=t.onCommit=t.queryBpmTemplateAllocate=t.billidToIds=t.sendBpmTaskAJAX=t.getBpmTaskURL=t.recordToState=t.descriptionToText=t.timestampToDate=void 0;s(37);var a=s(35),r=function(e){return e&&e.__esModule?e:{default:e}}(s(105)),n=s(34);t.timestampToDate=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"yyyy-MM-dd  hh:mm:ss",s=new Date(e),r=t,n=[(0,a.getlocals)({id:"js.b9f.src3.0001",defaultMessage:"日"}),(0,a.getlocals)({id:"js.b9f.src3.0002",defaultMessage:"一"}),(0,a.getlocals)({id:"js.b9f.src3.0003",defaultMessage:"二"}),(0,a.getlocals)({id:"js.b9f.src3.0004",defaultMessage:"三"}),(0,a.getlocals)({id:"js.b9f.src3.0005",defaultMessage:"四"}),(0,a.getlocals)({id:"js.b9f.src3.0006",defaultMessage:"五"}),(0,a.getlocals)({id:"js.b9f.src3.0007",defaultMessage:"六"})];r=(r=r.replace(/yyyy|YYYY/,s.getFullYear())).replace(/yy|YY/,s.getYear()%100>9?(s.getYear()%100).toString():"0"+s.getYear()%100);var o=s.getMonth()+1;return r=(r=(r=(r=(r=(r=(r=(r=(r=(r=(r=r.replace(/MM/,o>9?o.toString():"0"+o)).replace(/M/g,o)).replace(/w|W/g,n[s.getDay()])).replace(/dd|DD/,s.getDate()>9?s.getDate().toString():"0"+s.getDate())).replace(/d|D/g,s.getDate())).replace(/hh|HH/,s.getHours()>9?s.getHours().toString():"0"+s.getHours())).replace(/h|H/g,s.getHours())).replace(/mm/,s.getMinutes()>9?s.getMinutes().toString():"0"+s.getMinutes())).replace(/m/g,s.getMinutes())).replace(/ss|SS/,s.getSeconds()>9?s.getSeconds().toString():"0"+s.getSeconds())).replace(/s|S/g,s.getSeconds())},t.descriptionToText=function(e){switch(e){case"submit":return(0,a.getlocals)({id:"js.b9f.src3.0008",defaultMessage:"提交"});case"agree":return(0,a.getlocals)({id:"js.b9f.src3.0009",defaultMessage:"审批"});case"unagree":return(0,a.getlocals)({id:"js.b9f.src3.0010",defaultMessage:"不同意"});case"reject":return(0,a.getlocals)({id:"js.b9f.src3.0011",defaultMessage:"驳回"});case"signAdd":return(0,a.getlocals)({id:"js.b9f.src3.0012",defaultMessage:"加签"});case"signAdding":return(0,a.getlocals)({id:"js.b9f.src3.0013",defaultMessage:"加签中"});case"delegate":return(0,a.getlocals)({id:"js.b9f.src3.0014",defaultMessage:"改派"});case"termination":return(0,a.getlocals)({id:"js.b9f.src3.0015",defaultMessage:"终止"});case"withdraw":return(0,a.getlocals)({id:"js.b9f.src3.0016",defaultMessage:"删除"});case"postCompleted":return(0,a.getlocals)({id:"js.b9f.src3.0009",defaultMessage:"审批"});default:return(0,a.getlocals)({id:"js.b9f.src3.0008",defaultMessage:"提交"})}},t.recordToState=function(e){return"withdraw"===e.description?(0,a.getlocals)({id:"js.b9f.src3.0017",defaultMessage:"已完成"}):e.endTime&&e.startTime?(0,a.getlocals)({id:"js.b9f.src3.0017",defaultMessage:"已完成"}):e.claimTime&&new Date>e.claimTime?(0,a.getlocals)({id:"js.b9f.src3.0019",defaultMessage:"已逾期"}):(0,a.getlocals)({id:"js.b9f.src3.0021",defaultMessage:"审批中"})};var o=t.getBpmTaskURL=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/eiap-plus/";switch(e){case"agree":case"unagree":return t+"task/completetask/approveCard";case"rejectToActivity":return t+"task/rejecttask/bfreject";case"rejectToBillMaker":return t+"task/rejecttask/reject";case"signAdd":case"delegate":return t+"task/assignee/getlist";case"withdraw":return t+"task/withdrawtask/withdraw";case"hisTasklist":return t+"process/hisTasklist";case"commit":return t+"task/assigntask/commit";case"signaddtask":return t+"task/signaddtask/signadd";case"delegatetask":return t+"task/delegatetask/delegate";default:return"/"}};t.sendBpmTaskAJAX=function(e,t){switch(e){case"agree":case"unagree":return r.default.post(o(e),{approvetype:t.approvetype,comment:t.comment,processDefinitionId:t.processDefinitionId,processInstanceId:t.processInstanceId,taskId:t.taskId,copyusers:t.copyusers,intersection:t.intersection}).catch(function(e){e.response&&401==e.response.status?n.Message.create({content:e.response.data&&e.response.data.msg,color:"danger",position:"top"}):n.Message.create({content:""+e.toString(),color:"danger",position:"top"})});case"rejectToActivity":return r.default.post(o(e),{approvetype:t.approvetype,comment:t.comment,processDefinitionId:t.processDefinitionId,processInstanceId:t.processInstanceId,taskId:t.taskId}).catch(function(e){e.response&&401==e.response.status?n.Message.create({content:e.response.data&&e.response.data.msg,color:"danger",position:"top"}):n.Message.create({content:""+e.toString(),color:"danger",position:"top"})});case"rejectToBillMaker":return r.default.post(o(e),{activityId:t.activityId,approvetype:t.approvetype,comment:t.comment,processInstanceId:t.processInstanceId,taskId:t.taskId,copyusers:t.copyusers,intersection:t.intersection}).catch(function(e){e.response&&401==e.response.status?n.Message.create({content:e.response.data&&e.response.data.msg,color:"danger",position:"top"}):n.Message.create({content:""+e.toString(),color:"danger",position:"top"})});case"signAdd":case"delegate":case"withdraw":return r.default.post(o(e),{approvetype:t.approvetype,comment:t.comment,processDefinitionId:t.processDefinitionId,processInstanceId:t.processInstanceId,taskId:t.taskId}).catch(function(e){e.response&&401==e.response.status?n.Message.create({content:e.response.data&&e.response.data.msg,color:"danger",position:"top"}):n.Message.create({content:""+e.toString(),color:"danger",position:"top"})});case"hisTasklist":return r.default.post(o(e),{processDefinitionId:t.processDefinitionId,processInstanceId:t.processInstanceId}).catch(function(e){e.response&&401==e.response.status?n.Message.create({content:e.response.data&&e.response.data.msg,color:"danger",position:"top"}):n.Message.create({content:""+e.toString(),color:"danger",position:"top"})});case"commit":return r.default.post(o(e),{activityId:t.activityId,activityName:t.activityName,comment:t.comment,taskId:t.taskId,approvetype:t.approvetype,processInstanceId:t.processInstanceId,participants:t.participants,assignInfo:t.assignInfo}).catch(function(e){e.response&&401==e.response.status?n.Message.create({content:e.response.data&&e.response.data.msg,color:"danger",position:"top"}):n.Message.create({content:""+e.toString(),color:"danger",position:"top"})});case"signaddtask":return r.default.post(o(e),{approvetype:t.approvetype,comment:t.comment,processInstanceId:t.processInstanceId,taskId:t.taskId,userIds:t.userIds,copyusers:t.copyusers,intersection:t.intersection}).catch(function(e){e.response&&401==e.response.status?n.Message.create({content:e.response.data&&e.response.data.msg,color:"danger",position:"top"}):n.Message.create({content:""+e.toString(),color:"danger",position:"top"})});case"delegatetask":return r.default.post(o(e),{approvetype:t.approvetype,comment:t.comment,processInstanceId:t.processInstanceId,taskId:t.taskId,userId:t.userId,copyusers:t.copyusers,intersection:t.intersection}).catch(function(e){e.response&&401==e.response.status?n.Message.create({content:e.response.data&&e.response.data.msg,color:"danger",position:"top"}):n.Message.create({content:""+e.toString(),color:"danger",position:"top"})})}return r.default.post(o(e),t).catch(function(e){e.response&&401==e.response.status?n.Message.create({content:e.response.data&&e.response.data.msg,color:"danger",position:"top"}):n.Message.create({content:""+e.toString(),color:"danger",position:"top"})})},t.billidToIds=function(e){return r.default.post("/eiap-plus/process/getbillbpm",{billId:e})},t.queryBpmTemplateAllocate=function(e){return r.default.get("/eiap-plus/appResAllocate/queryBpmTemplateAllocate?_="+Math.random(),{params:{funccode:e.funccode,nodekey:e.nodekey}})},t.onCommit=function(e){return(0,r.default)({url:""+e.url,method:"post",data:e.params?e.params:e.submitArray,params:{processDefineCode:e.processDefineCode}})},t.onRecall=function(e,t,s){return(0,r.default)({url:""+e,method:"post",data:t}).catch(function(){s&&s({type:2,msg:(0,a.getlocals)({id:"js.b9f.src5.0003",defaultMessage:"服务器请求出错"})})})},t.approvetypeToText=function(e){switch(e){case"agree":return(0,a.getlocals)({id:"js.b9f.src3.0023",defaultMessage:"审批同意"});case"unagree":return(0,a.getlocals)({id:"js.b9f.src3.0024",defaultMessage:"审批不同意"});case"rejectToActivity":return(0,a.getlocals)({id:"js.b9f.src3.0025",defaultMessage:"驳回到环节"});case"rejectToBillMaker":return(0,a.getlocals)({id:"js.b9f.src3.0026",defaultMessage:"驳回到制单人"});case"signAdd":return(0,a.getlocals)({id:"js.b9f.src3.0012",defaultMessage:"加签"});case"delegate":return(0,a.getlocals)({id:"js.b9f.src3.0014",defaultMessage:"改派"});case"withdraw":return(0,a.getlocals)({id:"js.b9f.src3.0027",defaultMessage:"弃审"})}},t.reconvert=function(e){return e=(e=(e=(e=e||"").replace(/(\\u)(\w{1,4})/gi,function(e){return String.fromCharCode(parseInt(escape(e).replace(/(%5Cu)(\w{1,4})/g,"$2"),16))})).replace(/(&#x)(\w{1,4});/gi,function(e){return String.fromCharCode(parseInt(escape(e).replace(/(%26%23x)(\w{1,4})(%3B)/g,"$2"),16))})).replace(/(&#)(\d{1,6});/gi,function(e){return String.fromCharCode(parseInt(escape(e).replace(/(%26%23)(\d{1,6})(%3B)/g,"$2")))})}},643:function(e,t,s){var a={"./af":241,"./af.js":241,"./ar":242,"./ar-dz":243,"./ar-dz.js":243,"./ar-kw":244,"./ar-kw.js":244,"./ar-ly":245,"./ar-ly.js":245,"./ar-ma":246,"./ar-ma.js":246,"./ar-sa":247,"./ar-sa.js":247,"./ar-tn":248,"./ar-tn.js":248,"./ar.js":242,"./az":249,"./az.js":249,"./be":250,"./be.js":250,"./bg":251,"./bg.js":251,"./bm":252,"./bm.js":252,"./bn":253,"./bn.js":253,"./bo":254,"./bo.js":254,"./br":255,"./br.js":255,"./bs":256,"./bs.js":256,"./ca":257,"./ca.js":257,"./cs":258,"./cs.js":258,"./cv":259,"./cv.js":259,"./cy":260,"./cy.js":260,"./da":261,"./da.js":261,"./de":262,"./de-at":263,"./de-at.js":263,"./de-ch":264,"./de-ch.js":264,"./de.js":262,"./dv":265,"./dv.js":265,"./el":266,"./el.js":266,"./en-SG":267,"./en-SG.js":267,"./en-au":268,"./en-au.js":268,"./en-ca":269,"./en-ca.js":269,"./en-gb":113,"./en-gb.js":113,"./en-ie":270,"./en-ie.js":270,"./en-il":271,"./en-il.js":271,"./en-nz":272,"./en-nz.js":272,"./eo":273,"./eo.js":273,"./es":274,"./es-do":275,"./es-do.js":275,"./es-us":276,"./es-us.js":276,"./es.js":274,"./et":277,"./et.js":277,"./eu":278,"./eu.js":278,"./fa":279,"./fa.js":279,"./fi":280,"./fi.js":280,"./fo":281,"./fo.js":281,"./fr":282,"./fr-ca":283,"./fr-ca.js":283,"./fr-ch":284,"./fr-ch.js":284,"./fr.js":282,"./fy":285,"./fy.js":285,"./ga":286,"./ga.js":286,"./gd":287,"./gd.js":287,"./gl":288,"./gl.js":288,"./gom-latn":289,"./gom-latn.js":289,"./gu":290,"./gu.js":290,"./he":291,"./he.js":291,"./hi":292,"./hi.js":292,"./hr":293,"./hr.js":293,"./hu":294,"./hu.js":294,"./hy-am":295,"./hy-am.js":295,"./id":296,"./id.js":296,"./is":297,"./is.js":297,"./it":298,"./it-ch":299,"./it-ch.js":299,"./it.js":298,"./ja":300,"./ja.js":300,"./jv":301,"./jv.js":301,"./ka":302,"./ka.js":302,"./kk":303,"./kk.js":303,"./km":304,"./km.js":304,"./kn":305,"./kn.js":305,"./ko":306,"./ko.js":306,"./ku":307,"./ku.js":307,"./ky":308,"./ky.js":308,"./lb":309,"./lb.js":309,"./lo":310,"./lo.js":310,"./lt":311,"./lt.js":311,"./lv":312,"./lv.js":312,"./me":313,"./me.js":313,"./mi":314,"./mi.js":314,"./mk":315,"./mk.js":315,"./ml":316,"./ml.js":316,"./mn":317,"./mn.js":317,"./mr":318,"./mr.js":318,"./ms":319,"./ms-my":320,"./ms-my.js":320,"./ms.js":319,"./mt":321,"./mt.js":321,"./my":322,"./my.js":322,"./nb":323,"./nb.js":323,"./ne":324,"./ne.js":324,"./nl":325,"./nl-be":326,"./nl-be.js":326,"./nl.js":325,"./nn":327,"./nn.js":327,"./pa-in":328,"./pa-in.js":328,"./pl":329,"./pl.js":329,"./pt":330,"./pt-br":331,"./pt-br.js":331,"./pt.js":330,"./ro":332,"./ro.js":332,"./ru":333,"./ru.js":333,"./sd":334,"./sd.js":334,"./se":335,"./se.js":335,"./si":336,"./si.js":336,"./sk":337,"./sk.js":337,"./sl":338,"./sl.js":338,"./sq":339,"./sq.js":339,"./sr":340,"./sr-cyrl":341,"./sr-cyrl.js":341,"./sr.js":340,"./ss":342,"./ss.js":342,"./sv":343,"./sv.js":343,"./sw":344,"./sw.js":344,"./ta":345,"./ta.js":345,"./te":346,"./te.js":346,"./tet":347,"./tet.js":347,"./tg":348,"./tg.js":348,"./th":349,"./th.js":349,"./tl-ph":350,"./tl-ph.js":350,"./tlh":351,"./tlh.js":351,"./tr":352,"./tr.js":352,"./tzl":353,"./tzl.js":353,"./tzm":354,"./tzm-latn":355,"./tzm-latn.js":355,"./tzm.js":354,"./ug-cn":356,"./ug-cn.js":356,"./uk":357,"./uk.js":357,"./ur":358,"./ur.js":358,"./uz":359,"./uz-latn":360,"./uz-latn.js":360,"./uz.js":359,"./vi":361,"./vi.js":361,"./x-pseudo":362,"./x-pseudo.js":362,"./yo":363,"./yo.js":363,"./zh-cn":71,"./zh-cn.js":71,"./zh-hk":364,"./zh-hk.js":364,"./zh-tw":365,"./zh-tw.js":365};function r(e){var t=n(e);return s(t)}function n(e){if(!s.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}r.keys=function(){return Object.keys(a)},r.resolve=n,e.exports=r,r.id=643},96:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){return e&&e.__esModule?e:{default:e}}(s(180)),r=s(35);var n={title:"",refType:2,className:"",buttonText:{ok:(0,r.getlocals)({id:"js.b9f.src5.0026",defaultMessage:"确定"}),cancel:(0,r.getlocals)({id:"js.b9f.src14.0010",defaultMessage:"取消"})},param:{refCode:"bd_common_user",tenantId:"",sysId:"",transmitParam:"EXAMPLE_CONTACTS,EXAMPLE_ORGANIZATION"},refModelUrl:{TreeUrl:"/newref/rest/iref_ctr/blobRefTree",TableBodyUrl:"/newref/rest/iref_ctr/blobRefTreeGrid",TableBarUrl:"/newref/rest/iref_ctr/refInfo"},filterRefUrl:"/iuap_pap_quickstart/common/filterRef",onCancel:function(e){console.log(e)},filterKey:[{title:"用户名称",key:"peoname"}],textOption:{modalTitle:"选择品类",leftTitle:"品类结构",rightTitle:"品类列表",leftTransferText:"待选品类",rightTransferText:"已选品类",leftInfo:[{text:"流水号",key:"peoname"},{text:"品类编码",key:"institid"},{text:"品类描述",key:"refname"}],rightInfo:[{text:"流水号",key:"id"},{text:"品类编码",key:"id"},{text:"品类描述",key:"peocode"}]}};t.default=(0,a.default)(n)},960:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=b(s(39)),r=b(s(18)),n=b(s(21)),o=b(s(22)),c=b(s(51)),l=b(s(26)),i=function(){function e(e,t){for(var s=0;s<t.length;s++){var a=t[s];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),(0,r.default)(e,a.key,a)}}return function(t,s,a){return s&&e(t.prototype,s),a&&e(t,a),t}}(),u=(s(37),s(35)),f=s(1),d=b(f),p=s(34),g=b(s(105));function b(e){return e&&e.__esModule?e:{default:e}}var m=function(e){function t(){var e=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var s=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||(0,l.default)(t)).call(this));return s.componentDidMount=function(e){return function(){var t=e.apply(this,arguments);return new a.default(function(e,s){return function r(n,o){try{var c=t[n](o),l=c.value}catch(e){return void s(e)}if(!c.done)return a.default.resolve(l).then(function(e){r("next",e)},function(e){r("throw",e)});e(l)}("next")})}}(c.default.mark(function t(){var a,r;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a="eiap-plus/process/undoTasklist",e.next=3,g.default.post(a,{draw:1,length:10,order:{},search:{search_EQ_code:"",undefined:"",processDefinitionName:"",billno:""},searchconfirm:{}});case 3:r=e.sent,Array.isArray(r.data.data)&&s.setState({data:r.data.data});case 5:case"end":return e.stop()}},t,e)})),s.state={data:[],factoryValue:{}},s.columns=[{title:"Name",dataIndex:"name",key:"name"},{title:"ID",dataIndex:"id",key:"id"},{title:"processDefinitionId",dataIndex:"processDefinitionId",key:"processDefinitionId"},{title:"processInstanceId",dataIndex:"processInstanceId",key:"processInstanceId"}],s}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=(0,o.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(n.default?(0,n.default)(e,t):e.__proto__=t)}(t,f.Component),i(t,[{key:"render",value:function(){var e=this;return d.default.createElement(p.Table,{bordered:!0,emptyText:function(){return d.default.createElement("span",null,d.default.createElement(u.FormattedMessage,{id:"js.b9f.src11.0001",defaultMessage:"暂时没有数据"}))},columns:this.columns,data:this.state.data,title:function(){return d.default.createElement(p.Button,{colors:"primary",onClick:function(){document.location.hash="#/bdm/bpmapproval?id="+e.state.factoryValue.id+"&processDefinitionId="+e.state.factoryValue.processDefinitionId+"&processInstanceId="+e.state.factoryValue.processInstanceId}},d.default.createElement(u.FormattedMessage,{id:"js.b9f.src11.0002",defaultMessage:"任务中心打开审批"}))},onRowClick:function(t,s,a){e.setState({factoryValue:t})}})}}]),t}();t.default=m},961:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=j(s(39)),r=j(s(18)),n=j(s(21)),o=j(s(22)),c=j(s(51)),l=j(s(26)),i=function(){function e(e,t){for(var s=0;s<t.length;s++){var a=t[s];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),(0,r.default)(e,a.key,a)}}return function(t,s,a){return s&&e(t.prototype,s),a&&e(t,a),t}}(),u=s(1),f=j(u),d=j(s(0)),p=s(34),g=j(s(212)),b=j(s(196)),m=s(57);function j(e){return e&&e.__esModule?e:{default:e}}var y={id:d.default.string,processDefinitionId:d.default.string,processInstanceId:d.default.string},h=function(e){function t(){var e=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var s=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||(0,l.default)(t)).call(this));return s.componentWillMount=function(e){return function(){var t=e.apply(this,arguments);return new a.default(function(e,s){return function r(n,o){try{var c=t[n](o),l=c.value}catch(e){return void s(e)}if(!c.done)return a.default.resolve(l).then(function(e){r("next",e)},function(e){r("throw",e)});e(l)}("next")})}}(c.default.mark(function t(){var a,r,n,o;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(s.props.processDefinitionId){e.next=8;break}return e.next=3,(0,m.billidToIds)(s.props.id);case 3:a=e.sent,r=a.data,n=r.processDefinitionId,o=r.processInstanceId,s.setState({processDefinitionId:n,processInstanceId:o}),e.next=9;break;case 8:s.setState({processDefinitionId:s.props.processDefinitionId,processInstanceId:s.props.processInstanceId});case 9:case"end":return e.stop()}},t,e)})),s.state={processDefinitionId:"",processInstanceId:""},s}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=(0,o.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(n.default?(0,n.default)(e,t):e.__proto__=t)}(t,u.Component),i(t,[{key:"render",value:function(){return f.default.createElement("div",null,f.default.createElement(p.Row,null,f.default.createElement(p.Col,{md:12},this.state.processDefinitionId&&f.default.createElement(g.default,{processDefinitionId:this.state.processDefinitionId,processInstanceId:this.state.processInstanceId}))),f.default.createElement(p.Row,null,f.default.createElement(p.Col,{md:12},this.state.processDefinitionId&&f.default.createElement(b.default,{processDefinitionId:this.state.processDefinitionId,processInstanceId:this.state.processInstanceId}))))}}]),t}();h.propTypes=y,h.defaultProps={id:""},t.default=h},962:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=M(s(39)),r=M(s(18)),n=M(s(21)),o=M(s(22)),c=M(s(58)),l=M(s(95)),i=M(s(51)),u=M(s(26)),f=function(){function e(e,t){for(var s=0;s<t.length;s++){var a=t[s];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),(0,r.default)(e,a.key,a)}}return function(t,s,a){return s&&e(t.prototype,s),a&&e(t,a),t}}(),d=(s(37),s(35)),p=M(s(67)),g=s(1),b=M(g),m=M(s(0)),j=s(34),y=M(s(213)),h=M(s(97)),v=s(57),w=M(s(96)),I=M(s(151)),k=M(s(409));function M(e){return e&&e.__esModule?e:{default:e}}function _(e){return function(){var t=e.apply(this,arguments);return new a.default(function(e,s){return function r(n,o){try{var c=t[n](o),l=c.value}catch(e){return void s(e)}if(!c.done)return a.default.resolve(l).then(function(e){r("next",e)},function(e){r("throw",e)});e(l)}("next")})}}var E={id:m.default.string,refCode:m.default.string,processDefinitionId:m.default.string,processInstanceId:m.default.string,onBpmFlowClick:m.default.func,appType:m.default.string,onStart:m.default.func,onEnd:m.default.func,onSuccess:m.default.func,onError:m.default.func},S=function(e){function t(){var e=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var s=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||(0,u.default)(t)).call(this));return s.componentWillMount=_(i.default.mark(function t(){var a,r,n,o,c,l,u,f,d,p,g,b,m;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(s.props.processDefinitionId){e.next=7;break}return e.next=3,(0,v.billidToIds)(s.props.id);case 3:(a=e.sent).data.message&&"NoBpm"==a.data.message?s.setState({isShowFlowBtn:!1}):a.data.taskId?(r=a.data,n=r.processDefinitionId,o=r.processInstanceId,c=r.taskId,l=a.data.currentActivity.properties,u=l.addsignAble,f=l.iscopytouser,d=l.rejectAble,p=l.delegateAble,g=l.unagreeable,b=l.assignAble,m=l.deleteable,s.setState({id:c,taskId:c,properties:{addsignAble:u,iscopytouser:f,rejectAble:d,delegateAble:p,unagreeable:g,assignAble:b,deleteable:m},processDefinitionId:n,processInstanceId:o})):s.setState({isShowFlowBtn:!0}),e.next=8;break;case 7:s.setState({processDefinitionId:s.props.processDefinitionId,processInstanceId:s.props.processInstanceId,id:s.props.id});case 8:case"end":return e.stop()}},t,e)})),s.closeHuanjie=function(){s.setState({huanjieShow:!1,childRefKey:[],showVal:[]})},s.huanjieHandlerOK=_(i.default.mark(function t(){var a,r,n,o,c,l,u;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=s.props,r=a.onSuccess,n=a.onError,o=a.onStart,a.onEnd,c=s.state,c.processDefineCode,l=c.assignInfo,c.obj,c.copyusers,c.intersection,c.submiting,o&&o(s.state.approvetype),e.next=5,(0,v.sendBpmTaskAJAX)("commit",{activityId:s.state.HuoDongID,activityName:s.state.HuoDongName,comment:s.state.comment,taskId:s.state.taskId,approvetype:s.state.approvetype,processInstanceId:s.state.processInstanceId,participants:[],assignInfo:l}).catch(function(e){j.Message.create({content:""+e.toString(),color:"danger",position:"top"}),n&&n({type:2,msg:(0,d.getlocals)({id:"js.b9f.src5.0003",defaultMessage:"服务器请求出错"})})});case 5:"success"==(u=e.sent).data.flag?(r&&r(s.state.approvetype),s.setState({huanjieShow:!1,childRefKey:[],showVal:[],submiting:!1})):"fail_global"==u.data.flag&&(n&&n({type:2,msg:reconvert(u.data.message)||(0,d.getlocals)({id:"js.b9f.src5.0004",defaultMessage:"流程启动失败"})}),s.setState({huanjieShow:!1,childRefKey:[],showVal:[],submiting:!1}));case 7:case"end":return e.stop()}},t,e)})),s.handlerSubmitBtn=_(i.default.mark(function t(){var a,r,n,o,u,f,g,b,m,y,h,k,M,E,S,T,C,x,A;return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a=s.props,r=a.onStart,n=a.onEnd,o=a.onSuccess,u=a.onError,""!=s.state.comment){t.next=4;break}return j.Message.create({content:(0,d.getlocals)({id:"js.b9f.src5.0005",defaultMessage:"审批意见不能为空"}),color:"danger",position:"top"}),t.abrupt("return");case 4:r&&r(s.state.approvetype),t.t0=s.state.approvetype,t.next="agree"===t.t0?8:"unagree"===t.t0?8:"rejectToActivity"===t.t0?14:"signAdd"===t.t0?24:"delegate"===t.t0?34:"withdraw"===t.t0?44:"rejectToBillMaker"===t.t0?49:54;break;case 8:return t.next=10,(0,v.sendBpmTaskAJAX)(s.state.approvetype,s.state);case 10:return"success"==(f=t.sent).data.flag?(j.Message.create({content:f.data.msg,color:"info",position:"top"}),o&&o(s.state.approvetype)):"faile"==f.data.flag&&(j.Message.create({content:f.data.msg,color:"danger",position:"top"}),u&&u({type:2,msg:f.data.msg})),f.data.assignAble&&(f.data.assignList.length>1?(n&&n(s.state.approvetype),g=f.data.assignList,s.setState({huanjieShow:!0,huanjieList:g,assignInfo:{assignInfoItems:(0,l.default)(g,function(e){return{activityId:e.activityId,activityName:e.activityName,participants:[]}})}})):(f.data.assignList.length>0&&s.setState({HuoDongID:f.data.assignList[0].activityId,HuoDongName:f.data.assignList[0].activityName}),n&&n(s.state.approvetype),b=(0,c.default)(JSON.parse(w.default),{title:(0,d.getlocals)({id:"js.b9f.src5.0006",defaultMessage:"指派用户选择"}),backdrop:!1,hasPage:!0,refType:5,isRadio:!1,className:"",param:{refCode:s.props.refCode,tenantId:"",sysId:"",transmitParam:"EXAMPLE_CONTACTS,EXAMPLE_ORGANIZATION",locale:p.default.load("u_locale")},checkedArray:[],textOption:{modalTitle:(0,d.getlocals)({id:"js.b9f.src5.0007",defaultMessage:"选择指派用户"}),leftTitle:(0,d.getlocals)({id:"js.b9f.src5.0008",defaultMessage:"组织结构"}),rightTitle:(0,d.getlocals)({id:"js.b9f.src5.0009",defaultMessage:"用户列表"}),leftTransferText:(0,d.getlocals)({id:"js.b9f.src5.0010",defaultMessage:"待选用户"}),rightTransferText:(0,d.getlocals)({id:"js.b9f.src5.0011",defaultMessage:"已选用户"})},onCancel:function(e){console.log(e)},onSave:function(){var t=_(i.default.mark(function t(a,n){var c;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r&&r(s.state.approvetype),e.next=3,(0,v.sendBpmTaskAJAX)("commit",{activityId:s.state.HuoDongID,activityName:s.state.HuoDongName,comment:s.state.comment,taskId:s.state.taskId,approvetype:s.state.approvetype,processInstanceId:s.state.processInstanceId,participants:(0,l.default)(a,function(e){return{id:e.id}}),assignInfo:{assignInfoItems:[{activityId:s.state.HuoDongID,activityName:s.state.HuoDongName,participants:(0,l.default)(a,function(e){return{id:e.id}})}]}}).catch(function(e){j.Message.create({content:""+e.toString(),color:"danger",position:"top"}),u&&u({type:2,msg:(0,d.getlocals)({id:"js.b9f.src5.0003",defaultMessage:"服务器请求出错"})})});case 3:"success"==(c=e.sent).data.flag?(j.Message.create({content:""+c.data.msg,color:"info",position:"top"}),s.setState({rejectlist:[],selectedRow:[]}),o&&o(s.state.approvetype)):(j.Message.create({content:""+c.data.msg,color:"danger",position:"top"}),u&&u({type:2,msg:c.data.msg}));case 5:case"end":return e.stop()}},t,e)}));return function(e,s){return t.apply(this,arguments)}}(),showVal:"",showKey:"refname",verification:!1}),(0,I.default)(b))),t.abrupt("break",55);case 14:if(m=s.state,y=m.activityId,h=m.approvetype,k=m.comment,M=m.processInstanceId,E=m.taskId,y&&0!==y.length){t.next=19;break}return j.Message.create({content:(0,d.getlocals)({id:"js.b9f.src5.0013",defaultMessage:"驳回环节不可为空"}),color:"warning",position:"top"}),u&&u({type:2,msg:(0,d.getlocals)({id:"js.b9f.src5.0013",defaultMessage:"驳回环节不可为空"})}),t.abrupt("return");case 19:return t.next=21,(0,v.sendBpmTaskAJAX)("rejectToBillMaker",{activityId:y,approvetype:h,comment:k,processInstanceId:M,taskId:E,copyusers:s.state.copyusers,intersection:s.state.intersection}).catch(function(e){j.Message.create({content:""+e.toString(),color:"danger",position:"top"}),u&&u({type:2,msg:(0,d.getlocals)({id:"js.b9f.src5.0014",defaultMessage:"服务器请求错误"})})});case 21:return"success"==(S=t.sent).data.flag?(o&&o(s.state.approvetype),j.Message.create({content:""+S.data.msg,color:"info",position:"top"}),s.setState({rejectToActivityShow:!1,rejectlist:[],selectedRow:[]})):(j.Message.create({content:""+S.data.msg,color:"danger",position:"top"}),u&&u({type:2,msg:S.data.msg})),t.abrupt("break",55);case 24:if(r&&r(s.state.approvetype),s.state.userIds&&0!==s.state.userIds.length){t.next=29;break}return j.Message.create({content:'getlocals({id:"js.b9f.src5.0016" ,defaultMessage:"加签用户不可为空" })',color:"warning",position:"top"}),u&&u({type:2,msg:(0,d.getlocals)({id:"js.b9f.src5.0016",defaultMessage:"加签用户不可为空"})}),t.abrupt("return");case 29:return t.next=31,(0,v.sendBpmTaskAJAX)("signaddtask",{approvetype:s.state.approvetype,comment:s.state.comment,processInstanceId:s.state.processInstanceId,taskId:s.state.taskId,userIds:s.state.userIds,copyusers:s.state.copyusers,intersection:s.state.intersection}).catch(function(e){j.Message.create({content:""+e.toString(),color:"danger",position:"top"}),u&&u({type:2,msg:(0,d.getlocals)({id:"js.b9f.src5.0003",defaultMessage:"服务器请求出错"})})});case 31:return"success"==(T=t.sent).data.flag?(j.Message.create({content:""+T.data.msg,color:"info",position:"top"}),o&&o(s.state.approvetype)):(j.Message.create({content:""+T.data.msg,color:"danger",position:"top"}),u&&u({type:2,msg:T.data.msg})),t.abrupt("break",55);case 34:if(r&&r(s.state.approvetype),s.state.userId&&0!==s.state.userId.length){t.next=39;break}return j.Message.create({content:(0,d.getlocals)({id:"js.b9f.src5.0018",defaultMessage:"改派用户不可为空"}),color:"warning",position:"top"}),u&&u({type:2,msg:(0,d.getlocals)({id:"js.b9f.src5.0018",defaultMessage:"改派用户不可为空"})}),t.abrupt("return");case 39:return t.next=41,(0,v.sendBpmTaskAJAX)("delegatetask",{approvetype:s.state.approvetype,comment:s.state.comment,processInstanceId:s.state.processInstanceId,taskId:s.state.taskId,userId:s.state.userId,copyusers:s.state.copyusers,intersection:s.state.intersection}).catch(function(e){j.Message.create({content:""+e.toString(),color:"danger",position:"top"}),u&&u({type:2,msg:(0,d.getlocals)({id:"js.b9f.src5.0003",defaultMessage:"服务器请求出错"})})});case 41:return"success"===(C=t.sent).data.flag?(j.Message.create({content:""+C.data.msg,color:"info",position:"top"}),o&&o(s.state.approvetype)):(j.Message.create({content:""+C.data.msg,color:"danger",position:"top"}),u&&u({type:2,msg:C.data.msg})),t.abrupt("break",55);case 44:return t.next=46,(0,v.sendBpmTaskAJAX)(s.state.approvetype,s.state);case 46:return"success"===(x=t.sent).data.flag?(j.Message.create({content:x.data.msg,color:"info",position:"top"}),o&&o(s.state.approvetype)):(j.Message.create({content:x.data.msg,color:"danger",position:"top"}),u&&u({type:2,msg:x.data.msg})),t.abrupt("break",55);case 49:return t.next=51,(0,v.sendBpmTaskAJAX)(s.state.approvetype,{activityId:"markerbill",approvetype:s.state.approvetype,comment:s.state.comment,processInstanceId:s.state.processInstanceId,taskId:s.state.taskId,copyusers:s.state.copyusers,intersection:s.state.intersection});case 51:return"success"===(A=t.sent).data.flag?(j.Message.create({content:A.data.msg,color:"info",position:"top"}),o&&o(s.state.approvetype)):(j.Message.create({content:A.data.msg,color:"danger",position:"top"}),u&&u({type:2,msg:A.data.msg})),t.abrupt("break",55);case 54:return t.abrupt("break",55);case 55:case"end":return t.stop()}},t,e)})),s.onChangestate=function(e){var t=e.approvetype,a=e.comment,r=e.taskId,n=e.activityId,o=e.userIds,c=e.userId;s.setState({approvetype:t,comment:a,taskId:r,activityId:n,userIds:o,userId:c})},s.state={childRefKey:[],isShowFlowBtn:!1,id:"",taskId:"",huanjieShow:!1,huanjieList:[],checkedArray:[],editRowIndex:0,showVal:[],submiting:!1,assignInfo:{assignInfoItems:[]},processDefinitionId:"",processInstanceId:"",copyusers:[],intersection:!0,approvetype:"agree",comment:(0,d.getlocals)({id:"js.b9f.src5.0001",defaultMessage:"审批同意"}),activityId:"",userIds:[],userId:"",properties:{addSignAble:!0,iscopytouser:!0,rejectAble:!0,delegateAble:!0,unagreeable:!0,assignAble:!0,deleteable:!0}},s}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=(0,o.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(n.default?(0,n.default)(e,t):e.__proto__=t)}(t,g.Component),f(t,[{key:"render",value:function(){var e=this,t=this,s=[{title:(0,d.getlocals)({id:"js.b9f.src5.0019",defaultMessage:"名称"}),dataIndex:"activityName",key:"activityName"},{title:(0,d.getlocals)({id:"js.b9f.src5.0020",defaultMessage:"指派"}),dataIndex:"1",key:"1",render:function(e,s,a){return b.default.createElement(h.default,{disabled:!1,option:(0,c.default)(JSON.parse(w.default),{title:(0,d.getlocals)({id:"js.b9f.src5.0007",defaultMessage:"选择指派用户"}),refType:5,className:"",param:{refCode:"userUnderOrgRef",tenantId:"",sysId:"",transmitParam:"5",locale:p.default.load("u_locale")},emptyBtn:!0,textOption:{modalTitle:(0,d.getlocals)({id:"js.b9f.src5.0007",defaultMessage:"选择指派用户"}),leftTitle:(0,d.getlocals)({id:"js.b9f.src5.0008",defaultMessage:"组织结构"}),rightTitle:(0,d.getlocals)({id:"js.b9f.src5.0009",defaultMessage:"用户列表"}),leftTransferText:(0,d.getlocals)({id:"js.b9f.src5.0010",defaultMessage:"待选用户"}),rightTransferText:(0,d.getlocals)({id:"js.b9f.src5.0011",defaultMessage:"已选用户"})},checkedArray:t.state.checkedArray[a]||[],onCancel:function(e){console.log(e)},onSave:function(e,s){console.log(e);var r=e.map(function(e){return e.id}),n=t.state.showVal.slice();n[a]=s;var o=t.state.childRefKey.slice();o[a]=r;var c=t.state.assignInfo.assignInfoItems.slice();c[a].participants=(0,l.default)(o[a],function(e){return{id:e}});var i=t.state.checkedArray;i[a]=e,t.setState({checkedArray:i,childRefKey:o,showVal:n,assignInfo:{assignInfoItems:c}})},showVal:t.state.showVal[a],showKey:"refname",verification:!1})})}}];return b.default.createElement("div",{className:"clearfix"},this.state.processDefinitionId&&b.default.createElement("div",null,b.default.createElement(j.Row,null,b.default.createElement("div",null)),b.default.createElement(j.Row,null,b.default.createElement(j.Col,{md:12},b.default.createElement(y.default,{id:this.state.id,refCode:this.props.refCode,onBpmFlowClick:this.props.onBpmFlowClick,processDefinitionId:this.state.processDefinitionId,processInstanceId:this.state.processInstanceId,appType:this.props.appType,properties:this.state.properties,onStart:this.props.onStart,onEnd:this.props.onEnd,onSuccess:this.props.onSuccess,onError:this.props.onError,onChangestate:this.onChangestate}))),this.state.properties.iscopytouser&&1==this.props.appType&&b.default.createElement(j.Row,null,b.default.createElement(j.Col,{md:12},b.default.createElement(k.default,{panelOpen:!1,title:"抄送(选填)",onCopyusersChange:function(t){e.setState({copyusers:t})},onintersectionChange:function(t){e.setState({intersection:t})}}))),b.default.createElement(j.Row,{style:{margin:"8px 0",padding:"0 10px"}},b.default.createElement(j.Col,{md:4,mdOffset:8,xs:4,xsOffset:8,sm:4,smOffset:8,style:{textAlign:"right",paddingRight:0}},b.default.createElement(j.Button,{onClick:this.handlerSubmitBtn,colors:"primary"},(0,d.getlocals)({id:"js.b9f.src5.0022",defaultMessage:"提交"}))))),this.state.isShowFlowBtn&&b.default.createElement(j.Row,null,b.default.createElement(j.Col,{mdOffset:10,md:2,style:{textAlign:"right"}},b.default.createElement(j.Button,{onClick:this.props.onBpmFlowClick,style:{marginBottom:"4px",marginRight:"15px"},colors:"primary"},(0,d.getlocals)({id:"js.b9f.src5.0023",defaultMessage:"流程图"})))),b.default.createElement(j.Modal,{size:this.props.size,show:this.state.huanjieShow,backdrop:!1,enforceFocus:!1,onHide:this.closeHuanjie},b.default.createElement(j.Modal.Header,{closeButton:!0},b.default.createElement(j.Modal.Title,null,(0,d.getlocals)({id:"js.b9f.src5.0024",defaultMessage:"环节指派"}))),b.default.createElement(j.Modal.Body,null,b.default.createElement(j.Table,{rowKey:function(e){return e.id},columns:s,data:this.state.huanjieList,scroll:{x:"100%",y:200}})),b.default.createElement(j.Modal.Footer,null,b.default.createElement(j.Button,{style:{marginRight:"10px"},onClick:this.closeHuanjie},(0,d.getlocals)({id:"js.b9f.src5.0025",defaultMessage:"关闭"})),b.default.createElement(j.Button,{colors:"primary",onClick:this.huanjieHandlerOK},(0,d.getlocals)({id:"js.b9f.src5.0026",defaultMessage:"确定"})))))}}]),t}();S.propTypes=E,S.defaultProps={id:"",appType:"1",refCode:"userUnderOrgRef"},t.default=S},963:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=M(s(39)),r=M(s(18)),n=M(s(21)),o=M(s(22)),c=M(s(58)),l=M(s(51)),i=M(s(95)),u=M(s(26)),f=c.default||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},d=function(){function e(e,t){for(var s=0;s<t.length;s++){var a=t[s];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),(0,r.default)(e,a.key,a)}}return function(t,s,a){return s&&e(t.prototype,s),a&&e(t,a),t}}(),p=(s(37),M(s(67))),g=s(35),b=M(s(105)),m=M(s(0)),j=s(1),y=M(j),h=s(34),v=M(s(97)),w=s(57),I=M(s(96)),k=M(s(183));function M(e){return e&&e.__esModule?e:{default:e}}function _(e){return function(){var t=e.apply(this,arguments);return new a.default(function(e,s){return function r(n,o){try{var c=t[n](o),l=c.value}catch(e){return void s(e)}if(!c.done)return a.default.resolve(l).then(function(e){r("next",e)},function(e){r("throw",e)});e(l)}("next")})}}var E={checkedArray:m.default.array,params:m.default.object,funccode:m.default.string,nodekey:m.default.string,url:m.default.string,urlAssignSubmit:m.default.string,className:m.default.string,filterRefUrl:m.default.string,refCode:m.default.string,size:m.default.string,scrollY:m.default.number,isOne:m.default.bool,onSuccess:m.default.func,onError:m.default.func,onStart:m.default.func,onEnd:m.default.func},S=function(e){function t(){var e=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var s=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||(0,u.default)(t)).call(this));return s.handlerBtn=_(l.default.mark(function t(){var a,r,n,o,c,u,f,d,p,b,m,j,y,h,v,I,k,M,_;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=s.props,r=a.params,n=a.checkedArray,o=a.isOne,c=a.onStart,u=a.onEnd,f=a.onSuccess,d=a.onError,!(o&&n.length>=2)){e.next=4;break}return d&&d({type:2,msg:(0,g.getlocals)({id:"js.b9f.src6.0001",defaultMessage:"请选择单条数据提交"})}),e.abrupt("return");case 4:if(!(n.length>0||r&&r.main)){e.next=32;break}if(!(n[0]&&n[0].bpmState>=1)){e.next=8;break}return d&&d({type:1,msg:(0,g.getlocals)({id:"js.b9f.src6.0002",defaultMessage:"不能提交此单据，重复提交"})}),e.abrupt("return");case 8:return c&&c(),e.next=11,(0,w.queryBpmTemplateAllocate)({funccode:s.props.funccode,nodekey:s.props.nodekey});case 11:if(p=e.sent,b=p.data,m=b.success,(j=b.detailMsg).data&&null!=j.data){e.next=18;break}return d&&d({type:1,msg:(0,g.getlocals)({id:"js.b9f.src6.0003",defaultMessage:"当前单据没有绑定流程"})}),e.abrupt("return");case 18:if("success"!=m){e.next=29;break}return y={url:s.props.url,processDefineCode:j.data.res_code,submitArray:n,params:r},s.setState({processDefineCode:j.data.res_code}),e.next=23,(0,w.onCommit)(y);case 23:h=e.sent,(v=h.data.flag)&&!h.data.data.assignAble?f&&f():v||d&&d({type:2,msg:(0,w.reconvert)(h.data.msg)||(0,g.getlocals)({id:"js.b9f.src6.0004",defaultMessage:"流程启动失败"})}),v&&h.data.data&&1==h.data.data.assignAble&&(I=h.data.data).assignedActivities&&I.assignedActivities.length>0&&(u&&u(),k=I.assignedActivities.filter(function(e){return!e.properties.startactivity}),s.setState({huanjieShow:!0,chaosongShow:I.assignedActivities[0].properties.iscopytouser,huanjieList:k,obj:n,assignInfo:{assignInfoItems:(0,i.default)(k,function(e){return{activityId:e.id,activityName:e.name,participants:[]}})}})),e.next=30;break;case 29:"fail_global"==m&&(M=result,_=M.data.message,d&&d({type:2,msg:(0,w.reconvert)(_)||(0,g.getlocals)({id:"js.b9f.src6.0004",defaultMessage:"流程启动失败"})}));case 30:e.next=33;break;case 32:d&&d({type:1,msg:(0,g.getlocals)({id:"js.b9f.src6.0005",defaultMessage:"请选择提交的单据"})});case 33:case"end":return e.stop()}},t,e)})),s.closeHuanjie=function(){s.setState({huanjieShow:!1,chaosongShow:!1,childRefKey:[],showVal:[]})},s.signAddOK=function(){var e=s.state.editRowIndex,t=s.state.assignInfo.assignInfoItems.slice();t[e].participants=(0,i.default)(s.state.userIds,function(e){return{id:e.id}}),s.setState({assignInfo:{assignInfoItems:t},userIds:[]})},s.huanjieHandlerOK=_(l.default.mark(function t(){var a,r,n,o,c,i,u,d,p,m,j,y,h,v,I,k;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=s.props,r=a.urlAssignSubmit,n=a.onSuccess,o=a.onError,c=a.onStart,a.onEnd,i=a.params,u=s.state,d=u.processDefineCode,p=u.assignInfo,m=u.obj,j=u.copyusers,y=u.intersection,h=u.submiting,m=m[0],v=[],I=s,j.map(function(e){v=v.concat(e)}),j=v,h){e.next=14;break}return c&&c(),s.setState({submiting:!0}),e.next=12,b.default.post(r,f({processDefineCode:d,assignInfo:p,obj:m,copyusers:j,intersection:y},i)).catch(function(e){o&&o({type:2,msg:(0,g.getlocals)({id:"js.b9f.src6.0006",defaultMessage:"后台服务请求发生错误"})}),I.setState({submiting:!1})});case 12:(k=e.sent).data.flag?(n&&n(),s.setState({huanjieShow:!1,chaosongShow:!1,childRefKey:[],showVal:[],submiting:!1})):k.data.flag||(o&&o({type:2,msg:(0,w.reconvert)(k.data.msg)||(0,g.getlocals)({id:"js.b9f.src6.0004",defaultMessage:"流程启动失败"})}),s.setState({huanjieShow:!1,chaosongShow:!1,childRefKey:[],showVal:[],submiting:!1}));case 14:case"end":return e.stop()}},t,e)})),s.changeCheck=function(){s.setState({intersection:!s.state.intersection})},s.state={childRefKey:[],userIds:[],processDefineCode:"",assignInfo:{assignInfoItems:[]},obj:[],huanjieShow:!1,huanjieList:[],chaosongShow:!1,editRowIndex:0,showVal:[],checkedArray:[],copyusers:[],intersection:!0,submiting:!1},s}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=(0,o.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(n.default?(0,n.default)(e,t):e.__proto__=t)}(t,j.Component),d(t,[{key:"render",value:function(){var e=this,t=[{title:y.default.createElement(g.FormattedMessage,{id:"js.b9f.src6.0007",defaultMessage:"名称"}),dataIndex:"name",key:"name"},{title:y.default.createElement(g.FormattedMessage,{id:"js.b9f.src6.0008",defaultMessage:"指派"}),dataIndex:"1",key:"1",render:function(t,s,a){return y.default.createElement(v.default,{disabled:!1,option:(0,c.default)(JSON.parse(I.default),{title:(0,g.getlocals)({id:"js.b9f.src6.0009",defaultMessage:"选择指派用户"}),refType:5,className:"",param:{refCode:"userUnderOrgRef",tenantId:"",sysId:"",transmitParam:"5",locale:p.default.load("u_locale")},emptyBtn:!0,textOption:{modalTitle:y.default.createElement(g.FormattedMessage,{id:"js.b9f.src6.0009",defaultMessage:"选择指派用户"}),leftTitle:y.default.createElement(g.FormattedMessage,{id:"js.b9f.src6.0010",defaultMessage:"组织结构"}),rightTitle:y.default.createElement(g.FormattedMessage,{id:"js.b9f.src6.0011",defaultMessage:"用户列表"}),leftTransferText:y.default.createElement(g.FormattedMessage,{id:"js.b9f.src6.0012",defaultMessage:"待选用户"}),rightTransferText:y.default.createElement(g.FormattedMessage,{id:"js.b9f.src6.0013",defaultMessage:"已选用户"})},checkedArray:e.state.checkedArray[a]||[],onCancel:function(e){console.log(e)},onSave:function(t,s){console.log(t);var r=t.map(function(e){return e.id}),n=e.state.showVal.slice();n[a]=s;var o=e.state.childRefKey.slice();o[a]=r;var c=e.state.assignInfo.assignInfoItems.slice();c[a].participants=(0,i.default)(o[a],function(e){return{id:e}});var l=e.state.checkedArray;l[a]=t,e.setState({checkedArray:l,childRefKey:o,showVal:n,assignInfo:{assignInfoItems:c}})},showVal:e.state.showVal[a],showKey:"refname",verification:!1})})}}];return y.default.createElement("span",null,y.default.createElement("span",{onClick:this.handlerBtn},this.props.children),y.default.createElement(h.Modal,{size:this.props.size,show:this.state.huanjieShow||this.state.chaosongShow,backdrop:!1,enforceFocus:!1,onHide:this.closeHuanjie},y.default.createElement(h.Modal.Header,{closeButton:!0},y.default.createElement(h.Modal.Title,null," ",this.state.huanjieShow?y.default.createElement(g.FormattedMessage,{id:"js.b9f.src6.0014",defaultMessage:"环节指派"}):y.default.createElement(g.FormattedMessage,{id:"js.b9f.src6.0015",defaultMessage:"抄送"}))),this.state.huanjieShow?y.default.createElement(h.Modal.Body,null,y.default.createElement(h.Table,{rowKey:function(e){return e.id},columns:t,data:this.state.huanjieList,scroll:{x:"100%",y:200}})):"",this.state.chaosongShow?y.default.createElement(h.Modal.Header,null,y.default.createElement(h.Modal.Title,null,y.default.createElement(g.FormattedMessage,{id:"js.b9f.src6.0016",defaultMessage:"抄送"}))):"",this.state.chaosongShow?y.default.createElement(h.Modal.Body,null,y.default.createElement(k.default,f({onCopyusersChange:function(t){e.setState({copyusers:t})}},e.props,{onintersectionChange:function(t){e.setState({intersection:t})}}))):"",y.default.createElement(h.Modal.Footer,null,y.default.createElement(h.Button,{style:{marginRight:"10px"},onClick:this.closeHuanjie},y.default.createElement(g.FormattedMessage,{id:"js.b9f.src6.0017",defaultMessage:"关闭"})),y.default.createElement(h.Button,{colors:"primary",onClick:this.huanjieHandlerOK},y.default.createElement(g.FormattedMessage,{id:"js.b9f.src6.0018",defaultMessage:"确定"})))))}}]),t}();S.propTypes=E,S.defaultProps={checkedArray:[],nodekey:"003",funccode:"react",url:"/example/ygdemo_yw_info/submit",urlAssignSubmit:"/example/ygdemo_yw_info/assignSubmit",className:"",filterRefUrl:"/iuap_pap_quickstart/common/filterRef",refCode:"relatedUser",size:"",scrollY:270,isOne:!1,organrefCode:"newdept",positonrefCode:"newposition",roleRef:"newRoleRef",userRef:"relatedUser"},t.default=S},964:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=b(s(39)),r=b(s(18)),n=b(s(21)),o=b(s(22)),c=b(s(51)),l=b(s(26)),i=function(){function e(e,t){for(var s=0;s<t.length;s++){var a=t[s];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),(0,r.default)(e,a.key,a)}}return function(t,s,a){return s&&e(t.prototype,s),a&&e(t,a),t}}(),u=(s(37),b(s(0))),f=s(1),d=b(f),p=s(57),g=s(35);function b(e){return e&&e.__esModule?e:{default:e}}var m={checkedArray:u.default.array,url:u.default.string,data:u.default.array,className:u.default.string,onSuccess:u.default.func,onError:u.default.func,onStart:u.default.func,onEnd:u.default.func,params:u.default.object},j=function(e){function t(){var e=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var s=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||(0,l.default)(t)).call(this));return s.handlerBtn=function(e){return function(){var t=e.apply(this,arguments);return new a.default(function(e,s){return function r(n,o){try{var c=t[n](o),l=c.value}catch(e){return void s(e)}if(!c.done)return a.default.resolve(l).then(function(e){r("next",e)},function(e){r("throw",e)});e(l)}("next")})}}(c.default.mark(function t(){var a,r,n,o,l,i,u,f,d,b,m,j,y;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=s.props,r=a.checkedArray,n=a.onStart,a.onEnd,o=a.onSuccess,l=a.onError,i=a.params,u=[],!i||!i.pk_gd){e.next=13;break}return n&&n(),e.next=6,(0,p.onRecall)(s.props.url,i);case 6:f=e.sent,d=f.data,b=d.msg,d.flag?o&&o():l&&l({type:2,msg:b}),e.next=31;break;case 13:if(!(r.length>=2)){e.next=16;break}return l&&l({type:2,msg:(0,g.getlocals)({id:"js.b9f.src13.0001",defaultMessage:"请选择单条数据收回"})}),e.abrupt("return");case 16:if(!(r.length>0)){e.next=20;break}r[0]&&0!=r[0].bpmState&&null!=r[0].bpmState?u.push({id:r[0].id}):l&&l({type:1,msg:(0,g.getlocals)({id:"js.b9f.src13.0002",defaultMessage:"流程没有启动无法撤回"})}),e.next=22;break;case 20:return l&&l({type:1,msg:(0,g.getlocals)({id:"js.b9f.src13.0001",defaultMessage:"请选择单条数据收回"})}),e.abrupt("return");case 22:if(!(u.length>0)){e.next=31;break}return n&&n(),e.next=26,(0,p.onRecall)(s.props.url,u);case 26:m=e.sent,j=m.data,j.success,(y=j.detailMsg).data.success&&"success"==y.data.success?o&&o():l&&l({type:2,msg:y.data.message});case 31:case"end":return e.stop()}},t,e)})),s}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=(0,o.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(n.default?(0,n.default)(e,t):e.__proto__=t)}(t,f.Component),i(t,[{key:"render",value:function(){return d.default.createElement("span",{onClick:this.handlerBtn},this.props.children)}}]),t}();j.propTypes=m,j.defaultProps={checkedArray:[],url:"/example/ygdemo_yw_info/unsubmit",data:[],className:""},t.default=j},965:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=I(s(39)),r=I(s(18)),n=I(s(21)),o=I(s(22)),c=I(s(58)),l=I(s(51)),i=I(s(95)),u=I(s(26)),f=function(){function e(e,t){for(var s=0;s<t.length;s++){var a=t[s];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),(0,r.default)(e,a.key,a)}}return function(t,s,a){return s&&e(t.prototype,s),a&&e(t,a),t}}(),d=(s(37),s(35)),p=I(s(67)),g=I(s(105)),b=I(s(0)),m=s(1),j=I(m),y=s(34),h=I(s(97)),v=s(57),w=I(s(96));function I(e){return e&&e.__esModule?e:{default:e}}function k(e){return function(){var t=e.apply(this,arguments);return new a.default(function(e,s){return function r(n,o){try{var c=t[n](o),l=c.value}catch(e){return void s(e)}if(!c.done)return a.default.resolve(l).then(function(e){r("next",e)},function(e){r("throw",e)});e(l)}("next")})}}var M={checkedArray:b.default.array,funccode:b.default.string,nodekey:b.default.string,url:b.default.string,urlAssignSubmit:b.default.string,className:b.default.string,filterRefUrl:b.default.string,refCode:b.default.string,scrollY:b.default.number,onSuccess:b.default.func,onError:b.default.func,onStart:b.default.func,onEnd:b.default.func},_=function(e){function t(){var e=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var s=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||(0,u.default)(t)).call(this));return s.handlerBtn=k(l.default.mark(function t(){var a,r,n,o,c,u,f,p,g,b,m,j,y,h,w;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=s.props,r=a.checkedArray,n=a.onStart,o=a.onEnd,c=a.onSuccess,u=a.onError,!(r.length>=2)){e.next=4;break}return u&&u({type:2,msg:(0,d.getlocals)({id:"js.b9f.src8.0001",defaultMessage:"请选择单条数据提交"})}),e.abrupt("return");case 4:if(!(r.length>0)){e.next=29;break}if(!(r[0].bpmState>=1)){e.next=8;break}return u&&u({type:1,msg:(0,d.getlocals)({id:"js.b9f.src8.0002",defaultMessage:"不能提交此单据，重复提交"})}),e.abrupt("return");case 8:return n&&n(),e.next=11,(0,v.queryBpmTemplateAllocate)({funccode:s.props.funccode,nodekey:s.props.nodekey});case 11:if(f=e.sent,p=f.data,g=p.success,b=p.detailMsg,"success"!=g){e.next=26;break}return m={url:s.props.url,processDefineCode:b.data.res_code,submitArray:r},s.setState({processDefineCode:b.data.res_code}),e.next=20,(0,v.onCommit)(m);case 20:j=e.sent,"success"==(y=j.data.success)&&void 0===j.data.detailMsg.data.assignAble?c&&c():"fail_global"==y&&u&&u({type:2,msg:(0,v.reconvert)(j.data.message)||(0,d.getlocals)({id:"js.b9f.src8.0003",defaultMessage:"流程启动失败"})}),1==j.data.detailMsg.data.assignAble&&j.data.detailMsg.data.assignedActivities&&j.data.detailMsg.data.assignedActivities.length>0&&(o&&o(),s.setState({huanjieShow:!0,huanjieList:j.data.detailMsg.data.assignedActivities,obj:r[0],assignInfo:{assignInfoItems:(0,i.default)(j.data.detailMsg.data.assignedActivities,function(e){return{activityId:e.id,activityName:e.name,participants:[]}})}})),e.next=27;break;case 26:"fail_global"==g&&(h=result,w=h.data.message,u&&u({type:2,msg:(0,v.reconvert)(w)||(0,d.getlocals)({id:"js.b9f.src8.0003",defaultMessage:"流程启动失败"})}));case 27:e.next=30;break;case 29:u&&u({type:1,msg:(0,d.getlocals)({id:"js.b9f.src8.0004",defaultMessage:"请选择提交的单据"})});case 30:case"end":return e.stop()}},t,e)})),s.closeHuanjie=function(){s.setState({huanjieShow:!1,childRefKey:[],showVal:[]})},s.signAddOK=function(){var e=s.state.editRowIndex,t=s.state.assignInfo.assignInfoItems.slice();t[e].participants=(0,i.default)(s.state.userIds,function(e){return{id:e.id}}),s.setState({assignInfo:{assignInfoItems:t},userIds:[]})},s.huanjieHandlerOK=k(l.default.mark(function t(){var a,r,n,o,c,i,u,f,p,b;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=s.props,r=a.urlAssignSubmit,n=a.onSuccess,o=a.onError,c=a.onStart,a.onEnd,i=s.state,u=i.processDefineCode,f=i.assignInfo,p=i.obj,c&&c(),e.next=5,g.default.post(r,{processDefineCode:u,assignInfo:f,obj:p}).catch(function(e){o&&o({type:2,msg:(0,d.getlocals)({id:"js.b9f.src8.0005",defaultMessage:"后台服务请求发生错误"})})});case 5:"success"==(b=e.sent).data.success?(n&&n(),s.setState({huanjieShow:!1,childRefKey:[],showVal:[]})):"fail_global"==b.data.success&&(o&&o({type:2,msg:(0,v.reconvert)(b.data.message)||(0,d.getlocals)({id:"js.b9f.src8.0003",defaultMessage:"流程启动失败"})}),s.setState({huanjieShow:!1,childRefKey:[],showVal:[]}));case 7:case"end":return e.stop()}},t,e)})),s.state={childRefKey:[],userIds:[],processDefineCode:"",assignInfo:{assignInfoItems:[]},obj:{},huanjieShow:!1,huanjieList:[{id:"approveUserTask3283",name:"1",type:"userTask"},{id:"approveUserTask3183",name:"1",type:"userTask"},{id:"approveUserTask3a83",name:"1",type:"userTask"},{id:"approveUserTask3s83",name:"1",type:"userTask"},{id:"approveUserTask32d3",name:"1",type:"userTask"},{id:"approveUserTask3zza83",name:"1",type:"userTask"},{id:"approveUserTasqzza83",name:"1",type:"userTask"},{id:"approveUserTask34za83",name:"1",type:"userTask"},{id:"approveUserTas43zza83",name:"1",type:"userTask"}],editRowIndex:0,showVal:[]},s}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=(0,o.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(n.default?(0,n.default)(e,t):e.__proto__=t)}(t,m.Component),f(t,[{key:"render",value:function(){var e=this,t=[{title:(0,d.getlocals)({id:"js.b9f.src8.0006",defaultMessage:"名称"}),dataIndex:"name",key:"name"},{title:(0,d.getlocals)({id:"js.b9f.src8.0007",defaultMessage:"指派"}),dataIndex:"1",key:"1",render:function(t,s,a){return j.default.createElement(h.default,{disabled:!1,option:(0,c.default)(JSON.parse(w.default),{title:(0,d.getlocals)({id:"js.b9f.src8.0008",defaultMessage:"用户选择"}),backdrop:!1,hasPage:!0,refType:2,isRadio:!1,filterRefUrl:e.props.filterRefUrl,className:"",param:{refCode:e.props.refCode,tenantId:"",sysId:"",transmitParam:"EXAMPLE_CONTACTS,EXAMPLE_ORGANIZATION",locale:p.default.load("u_locale")},keyList:e.state.childRefKey[a]||[],onSave:function(t,s){console.log(t);var r=t.map(function(e){return e.id}),n=e.state.showVal.slice();n[a]=s;var o=e.state.childRefKey.slice();o[a]=r;var c=e.state.assignInfo.assignInfoItems.slice();c[a].participants=(0,i.default)(o[a],function(e){return{id:e}}),e.setState({childRefKey:o,showVal:n,assignInfo:{assignInfoItems:c}})},showVal:e.state.showVal[a],showKey:"refname",verification:!1})})}}];return j.default.createElement(y.Table,{loading:!1,scroll:{y:this.props.scrollY},emptyText:function(){return j.default.createElement("span",null,(0,d.getlocals)({id:"js.b9f.src8.0009",defaultMessage:"暂无环节"}))},rowKey:function(e){return e.id},columns:t,data:this.state.huanjieList})}}]),t}();_.propTypes=M,_.defaultProps={checkedArray:[],nodekey:"003",funccode:"react",url:"/example/ygdemo_yw_info/submit",urlAssignSubmit:"/example/ygdemo_yw_info/assignSubmit",className:"",filterRefUrl:"/iuap_pap_quickstart/common/filterRef",refCode:"relatedUser",scrollY:270},t.default=_}},[[415,1,2]]]);
//# sourceMappingURL=main.5440713a.bundle.js.map